<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open CASCADE Technology: BRep Format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="occ_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open CASCADE Technology
   &#160;<span id="projectnumber">7.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('specification__brep_format.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">BRep Format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#specification__brep_format_1">Introduction</a></li>
<li class="level1"><a href="#specification__brep_format_2">Storage of shapes</a></li>
<li class="level1"><a href="#specification__brep_format_3">Format Common Structure</a></li>
<li class="level1"><a href="#specification__brep_format_4">Locations</a></li>
<li class="level1"><a href="#specification__brep_format_5">Geometry</a><ul><li class="level2"><a href="#specification__brep_format_5_1">3D curves</a><ul><li class="level3"><a href="#specification__brep_format_5_1_1">Line - &lt;3D curve record 1&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_1_2">Circle - &lt;3D curve record 2&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_1_3">Ellipse - &lt;3D curve record 3&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_1_4">Parabola - &lt;3D curve record 4&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_1_5">Hyperbola - &lt;3D curve record 5&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_1_6">Bezier Curve - &lt;3D curve record 6&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_1_7">B-Spline Curve - &lt;3D curve record 7&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_1_8">Trimmed Curve - &lt;3D curve record 8&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_1_9">Offset Curve - &lt;3D curve record 9&gt;</a></li>
</ul>
</li>
<li class="level2"><a href="#specification__brep_format_5_2">Surfaces</a><ul><li class="level3"><a href="#specification__brep_format_5_2_1">Plane - &lt; surface record 1 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_2">Cylinder - &lt; surface record 2 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_3">Cone - &lt; surface record 3 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_4">Sphere - &lt; surface record 4 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_5">Torus - &lt; surface record 5 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_6">Linear Extrusion - &lt; surface record 6 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_7">Revolution Surface - &lt; surface record 7 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_8">Bezier Surface - &lt; surface record 8 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_9">B-spline Surface - &lt; surface record 9 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_10">Rectangular Trim Surface - &lt; surface  record 10 &gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_2_11">Offset Surface - &lt; surface record 11 &gt;</a></li>
</ul>
</li>
<li class="level2"><a href="#specification__brep_format_5_3">2D curves</a><ul><li class="level3"><a href="#specification__brep_format_5_3_1">Line - &lt;2D curve record 1&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_3_2">Circle - &lt;2D curve record 2&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_3_3">Ellipse - &lt;2D curve record 3&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_3_4">Parabola - &lt;2D curve record 4&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_3_5">Hyperbola - &lt;2D curve record 5&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_3_6">Bezier Curve - &lt;2D curve record 6&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_3_7">B-spline Curve -  &lt;2D curve record 7&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_3_8">Trimmed Curve - &lt;2D curve record 8&gt;</a></li>
<li class="level3"><a href="#specification__brep_format_5_3_9">Offset Curve - &lt;2D curve record 9&gt;</a></li>
</ul>
</li>
<li class="level2"><a href="#specification__brep_format_5_4">3D polygons</a></li>
<li class="level2"><a href="#specification__brep_format_6_4">Triangulations</a></li>
<li class="level2"><a href="#specification__brep_format_6_5">Polygons on triangulations</a></li>
<li class="level2"><a href="#specification__brep_format_6_6">Geometric Sense of a Curve</a></li>
</ul>
</li>
<li class="level1"><a href="#specification__brep_format_7">Shapes</a><ul><li class="level2"><a href="#specification__brep_format_7_1">Common Terms</a></li>
<li class="level2"><a href="#specification__brep_format_7_2">Vertex data</a></li>
<li class="level2"><a href="#specification__brep_format_7_3">Edge data</a></li>
<li class="level2"><a href="#specification__brep_format_7_4">Face data</a></li>
</ul>
</li>
<li class="level1"><a href="#specification__brep_format_8">Appendix</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_dox_specification_brep_format"></a></p>
<h1><a class="anchor" id="specification__brep_format_1"></a>
Introduction</h1>
<p>BREP format is used to store 3D models and allows to store a model which consists of vertices, edges, wires, faces, shells, solids, compsolids, compounds, edge triangulations, face triangulations, polylines on triangulations, space location and orientation. Any set of such models may be stored as a single model which is a compound of the models. <br  />
</p>
<p>The format is described in an order which is convenient for understanding rather than in the order the format parts follow each other. BNF-like definitions are used in this document. Most of the chapters contain BREP format descriptions in the following order: <br  />
</p>
<ul>
<li>format file fragment to illustrate the part; <br  />
</li>
<li>BNF-like definition of the part; <br  />
</li>
<li>detailed description of the part. <br  />
</li>
</ul>
<p><b>Note</b> that the format is a part of Open CASCADE Technology (OCCT).</p>
<p>Some data fields of the format have additional values, which are used in OCCT.</p>
<p>Some data fields of the format are specific for OCCT.</p>
<h1><a class="anchor" id="specification__brep_format_2"></a>
Storage of shapes</h1>
<p><em><a class="elRef" href="../../refman/html/class_b_rep_tools.html">BRepTools</a></em> and <em><a class="elRef" href="../../refman/html/class_bin_tools.html">BinTools</a></em> packages contain methods <em>Read</em> and <em>Write</em> allowing to read and write a Shape to/from a stream or a file. The methods provided by <em><a class="elRef" href="../../refman/html/class_b_rep_tools.html">BRepTools</a></em> package use ASCII storage format; <em><a class="elRef" href="../../refman/html/class_bin_tools.html">BinTools</a></em> package uses binary format. Each of these methods has two arguments:</p><ul>
<li>a <em><a class="elRef" href="../../refman/html/class_topo_d_s___shape.html">TopoDS_Shape</a></em> object to be read/written;</li>
<li>a stream object or a file name to read from/write to.</li>
</ul>
<p>The following sample code reads a shape from ASCII file and writes it to a binary one:</p>
<div class="fragment"><div class="line"><a class="codeRef" href="../../refman/html/class_topo_d_s___shape.html">TopoDS_Shape</a> aShape;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="codeRef" href="../../refman/html/class_b_rep_tools.html#a194a29632668927539cd71e9c4d51148">BRepTools::Read</a> (aShape, <span class="stringliteral">&quot;source_file.txt&quot;</span>)) {</div>
<div class="line">  <a class="codeRef" href="../../refman/html/class_bin_tools.html#a02bba6e9e5346f34c165fc8efcd2211c">BinTools::Write</a> (aShape, <span class="stringliteral">&quot;result_file.bin&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_b_rep_tools_html_a194a29632668927539cd71e9c4d51148"><div class="ttname"><a href="../../refman/html/class_b_rep_tools.html#a194a29632668927539cd71e9c4d51148">BRepTools::Read</a></div><div class="ttdeci">static void Read(TopoDS_Shape &amp;Sh, Standard_IStream &amp;S, const BRep_Builder &amp;B, const Message_ProgressRange &amp;theProgress=Message_ProgressRange())</div></div>
<div class="ttc" id="aclass_bin_tools_html_a02bba6e9e5346f34c165fc8efcd2211c"><div class="ttname"><a href="../../refman/html/class_bin_tools.html#a02bba6e9e5346f34c165fc8efcd2211c">BinTools::Write</a></div><div class="ttdeci">static void Write(const TopoDS_Shape &amp;theShape, Standard_OStream &amp;theStream, const Message_ProgressRange &amp;theRange=Message_ProgressRange())</div></div>
<div class="ttc" id="aclass_topo_d_s___shape_html"><div class="ttname"><a href="../../refman/html/class_topo_d_s___shape.html">TopoDS_Shape</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="specification__brep_format_3"></a>
Format Common Structure</h1>
<p>ASCII encoding is used to read/write BREP format from/to file. The format data are stored in a file as text data. <br  />
</p>
<p>BREP format uses the following BNF terms:</p>
<ul>
<li>&lt;\n&gt;: It is the operating-system-dependent ASCII character sequence which separates ASCII text strings in the operating system used;</li>
<li>&lt;_\n&gt;: = " "*&lt;\n&gt;;</li>
<li>&lt;_&gt;: = " "+; It is a not empty sequence of space characters with ASCII code 21h;</li>
<li>&lt;flag&gt;: = "0" | "1";</li>
<li>&lt;int&gt;: It is an integer number from -2<sup>31</sup>&#160;to 2<sup>31</sup>-1&#160;which is written in denary system; <br  />
</li>
<li>&lt;real&gt;: It is a real from -1.7976931348623158 \(\cdot\) 10<sup>308</sup>&#160;to 1.7976931348623158 \(\cdot\) 10<sup>308</sup> which is written in decimal or E form with base 10.The point is used as a delimiter of the integer and fractional parts;</li>
<li>&lt;short real&gt;: It is a real from -3.402823 \(\cdot\) 10<sup>38</sup>&#160;to 3.402823 \(\cdot\) 10<sup>38</sup> which is written in decimal or E form with base 10.The point is used as a delimiter of the integer and fractional parts;</li>
<li>&lt;2D point&gt;: = &lt;real&gt;&lt;_&gt;&lt;real&gt;; <br  />
</li>
<li>&lt;3D point&gt;: = &lt;real&gt;(&lt;_&gt;&lt;real)&gt;<sup>2</sup>; <br  />
</li>
<li>&lt;2D direction&gt;: It is a &lt;2D point&gt; <em>x y</em>&#160;so that *x<sup>2</sup> + y<sup>2</sup>* = 1; <br  />
</li>
<li>&lt;3D direction&gt;: It is a &lt;3D point&gt; <em>x y z</em>&#160;so that *x<sup>2</sup> + y<sup>2</sup> + z<sup>2</sup>* = 1; <br  />
</li>
<li>&lt;+&gt;: It is an arithmetic operation of addition.</li>
</ul>
<p>The format consists of the following sections: <br  />
</p>
<ul>
<li>&lt;content type&gt;; <br  />
</li>
<li>&lt;version&gt;; <br  />
</li>
<li>&lt;locations&gt;; <br  />
</li>
<li>&lt;geometry&gt;; <br  />
</li>
<li>&lt;shapes&gt;. <br  />
</li>
</ul>
<p>&lt;content type&gt; = "DBRep_DrawableShape" &lt;_\n&gt;&lt;_\n&gt;; <br  />
 &lt;content type&gt; have other values [1]. <br  />
</p>
<p>&lt;version&gt; = ("CASCADE Topology V1, (c)  Matra-Datavision" | "CASCADE Topology V2, (c) Matra-Datavision" | "CASCADE Topology V3, (c) Open Cascade")&lt;_\n&gt;; The difference of the versions is described in the document. <br  />
</p>
<p>Sections &lt;locations&gt;, &lt;geometry&gt; and &lt;shapes&gt; are described below in separate chapters of the document. <br  />
</p>
<h1><a class="anchor" id="specification__brep_format_4"></a>
Locations</h1>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    Locations  3  
    1  
                   0               0               1               0   
                   1               0               0               0   
                   0               1               0               0   
    1  
                   1               0               0               4   
                   0               1               0               5   
                   0               0               1               6   
    2   1 1 2 1 0  
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;locations&gt; = &lt;location header&gt; &lt;_\n&gt; &lt;location records&gt;;  
    &lt;location header&gt; = "Locations" &lt;_&gt; &lt;location record count&gt;;  
    &lt;location record count&gt; = &lt;int&gt;;  
    &lt;location records&gt; = &lt;location record&gt; ^ &lt;location record count&gt;;  
    &lt;location record&gt; = &lt;location record 1&gt; | &lt;location record 2&gt;;  
    &lt;location record 1&gt; = "1" &lt;_\n&gt; &lt;location  data 1&gt;;  
    &lt;location record 2&gt; = "2" &lt;_&gt; &lt;location  data 2&gt;;  
    &lt;location data 1&gt; = ((&lt;_&gt; &lt;real&gt;) ^ 4 &lt;_\n&gt;) ^ 3;  
    &lt;location data 2&gt; = (&lt;int&gt; &lt;_&gt; &lt;int&gt; &lt;_&gt;)* "0" &lt;_\n&gt;;  
</pre><p><b>Description</b></p>
<p>&lt;location data 1&gt; is interpreted as a 3 x 4 matrix \(Q = \begin{pmatrix} {q}_{1,1} &amp;{q}_{1,2} &amp;{q}_{1,3} &amp;{q}_{1,4}\\ {q}_{2,1} &amp;{q}_{2,2} &amp;{q}_{2,3} &amp;{q}_{2,4}\\ {q}_{3,1} &amp;{q}_{3,2} &amp;{q}_{3,3} &amp;{q}_{3,4} \end{pmatrix}\)&#160; which describes transformation of 3 dimensional space and satisfies the following constraints: <br  />
</p><ul>
<li>\( d \neq 0\) where \(d = |Q_{2}|\) where \( Q_{2} = \begin{pmatrix} {q}_{1,1} &amp;{q}_{1,2} &amp;{q}_{1,3} &amp;{q}_{1,4}\\ {q}_{2,1} &amp;{q}_{2,2} &amp;{q}_{2,3} &amp;{q}_{2,4}\\ {q}_{3,1} &amp;{q}_{3,2} &amp;{q}_{3,3} &amp;{q}_{3,4} \end{pmatrix}; \)</li>
<li>\( Q_{3}^{T} = Q_{3}^{-1}\)&#160;where \(Q_{3} = Q_{2}/d^{1/3}. \) <br  />
</li>
</ul>
<p>The transformation transforms a point (x, y, z) to another point (u, v, w) by the rule: </p><p class="formulaDsp">
\[ \begin{pmatrix} u \\ v \\ w \end{pmatrix} = Q\cdot(x\;y\;z\;1)^{T} = \begin{pmatrix} {q}_{1,1}\cdot x +{q}_{1,2}\cdot y +{q}_{1,3}\cdot z +{q}_{1,4}\\ {q}_{2,1}\cdot x +{q}_{2,2}\cdot y +{q}_{2,3}\cdot z +{q}_{2,4}\\ {q}_{3,1}\cdot x +{q}_{3,2}\cdot y +{q}_{3,3}\cdot z +{q}_{3,4} \end{pmatrix} . \]
</p>
<p><em>Q</em> may be a composition of matrices for the following elementary transformations: <br  />
</p>
<ul>
<li>parallel translation &ndash; \( \begin{pmatrix} 1 &amp;0 &amp;0 &amp;{q}_{1,4}\\ 0 &amp;1 &amp;0 &amp;{q}_{2,4}\\ 0 &amp;0 &amp;1 &amp;{q}_{3,4} \end{pmatrix}; \)</li>
<li>rotation around an axis with a direction *D(D<sub>x</sub>, D<sub>y</sub>, D<sub>z</sub>)*&#160;by an angle \( \varphi \)&#160;&ndash; <br  />
</li>
</ul>
<p class="formulaDsp">
\[ \begin{pmatrix} D_{x}^{2} \cdot (1-cos(\varphi)) + cos(\varphi) &amp;D_{x} \cdot D_{y} \cdot (1-cos(\varphi)) - D_{z} \cdot sin(\varphi) &amp;D_{x} \cdot D_{z} \cdot (1-cos(\varphi)) + D_{y} \cdot sin(\varphi) &amp;0\\ D_{x} \cdot D_{y} \cdot (1-cos(\varphi)) + D_{z} \cdot sin(\varphi) &amp;D_{y}^{2} \cdot (1-cos(\varphi)) + cos(\varphi) &amp;D_{y} \cdot D_{z} \cdot (1-cos(\varphi)) - D_{x} \cdot sin(\varphi) &amp;0\\ D_{x} \cdot D_{z} \cdot (1-cos(\varphi)) - D_{y} \cdot sin(\varphi) &amp;D_{y} \cdot D_{z} \cdot (1-cos(\varphi)) + D_{x} \cdot sin(\varphi) &amp;D_{z}^{2} \cdot (1-cos(\varphi)) + cos(\varphi) &amp;0 \end{pmatrix}; \]
</p>
<ul>
<li>scaling &ndash; \( \begin{pmatrix} s &amp;0 &amp;0 &amp;0\\ 0 &amp;s &amp;0 &amp;0\\ 0 &amp;0 &amp;s &amp;0 \end{pmatrix} \)&#160;where \( S \in (-\infty,\; \infty)/\left \{ 0 \right \}; \)</li>
<li>central symmetry &ndash; \( \begin{pmatrix} -1 &amp;0 &amp;0 &amp;0\\ 0 &amp;-1 &amp;0 &amp;0\\ 0 &amp;0 &amp;-1 &amp;0 \end{pmatrix}; \) <br  />
</li>
<li>axis symmetry &ndash; \( \begin{pmatrix} -1 &amp;0 &amp;0 &amp;0\\ 0 &amp;-1 &amp;0 &amp;0\\ 0 &amp;0 &amp;1 &amp;0 \end{pmatrix}; \) <br  />
</li>
<li>plane symmetry &ndash; \( \begin{pmatrix} 1 &amp;0 &amp;0 &amp;0\\ 0 &amp;1 &amp;0 &amp;0\\ 0 &amp;0 &amp;-1 &amp;0 \end{pmatrix}. \)</li>
</ul>
<p>&lt;location data 2&gt; is interpreted as a composition of locations raised to a power and placed above this &lt;location data 2&gt; in the section &lt;locations&gt;. &lt;location data 2&gt; is a sequence \(l_{1}p_{1} ... l_{n}p_{n}\) of \( n \geq 0 \)&#160;integer pairs \( l_{i}p_{i} \; (1 \leq i \leq n) \). &lt;flag&gt; 0 is the indicator of the sequence end. The sequence is interpreted as a composition \( L_{l_{1}}^{p_{1}} \cdot ... \cdot L_{l_{n}}^{p_{n}} \)&#160;where \( L_{l_{i}} \)&#160;is a location from \( l_{i} \)-th &lt;location record&gt; in the section locations. &lt;location record&gt; numbering starts from 1. <br  />
</p>
<h1><a class="anchor" id="specification__brep_format_5"></a>
Geometry</h1>
<pre class="fragment">    &lt;geometry&gt; =  
    &lt;2D curves&gt;  
    &lt;3D curves&gt;  
    &lt;3D polygons&gt; 
    &lt;polygons on triangulations&gt;  
    &lt;surfaces&gt;  
    &lt;triangulations&gt;;  
</pre><h2><a class="anchor" id="specification__brep_format_5_1"></a>
3D curves</h2>
<p><b>Example</b></p>
<pre class="fragment">    Curves 13  
    1 0 0 0 0 0 1   
    1 0 0 3 -0 1 0   
    1 0 2 0 0 0 1   
    1 0 0 0 -0 1 0   
    1 1 0 0 0 0 1   
    1 1 0 3 0 1 0   
    1 1 2 0 0 0 1   
    1 1 0 0 -0 1 0   
    1 0 0 0 1 0 -0   
    1 0 0 3 1 0 -0   
    1 0 2 0 1 0 -0   
    1 0 2 3 1 0 -0   
    1 1 0 0 1 0 0   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;3D curves&gt; = &lt;3D curve header&gt; &lt;_\n&gt; &lt;3D curve records&gt;;  
     
    &lt;3D curve header&gt; = "Curves" &lt;_&gt; &lt;3D curve count&gt;;  
     
    &lt;3D curve count&gt; = &lt;int&gt;;  
     
    &lt;3D curve records&gt; = &lt;3D curve record&gt; ^ &lt;3D curve count&gt;;  
     
    &lt;3D curve record&gt; =  
    &lt;3D curve record 1&gt; |  
    &lt;3D curve record 2&gt; |  
    &lt;3D curve record 3&gt; |  
    &lt;3D curve record 4&gt; |  
    &lt;3D curve record 5&gt; |  
    &lt;3D curve record 6&gt; |  
    &lt;3D curve record 7&gt; |  
    &lt;3D curve record 8&gt; |  
    &lt;3D curve record 9&gt;;  </pre><h3><a class="anchor" id="specification__brep_format_5_1_1"></a>
Line - &lt;3D curve record 1&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    1 1 0 3 0 1 0   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;3D curve record 1&gt; = "1" &lt;_&gt; &lt;3D point&gt; &lt;_&gt; &lt;3D direction&gt; &lt;_\n&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;3D curve record 1&gt; describes a line. The line data consist of a 3D point <em>P</em>&#160;and a 3D direction <em>D</em>. The line passes through the point <em>P</em>, has the direction <em>D</em>&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+u \cdot D, \; u \in (-\infty,\; \infty). \]
</p>
<p>The example record is interpreted as a line which passes through a point <em>P</em>=(1, 0, 3), has a direction <em>D</em>=(0, 1, 0)&#160;and is defined by the following parametric equation: \( C(u)=(1,0,3)+u \cdot (0,1,0) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_1_2"></a>
Circle - &lt;3D curve record 2&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    2 1 2 3 0 0 1 1 0 -0 -0 1 0 4  
</pre><p><b>BNF-like Definition</b></p>
<div class="fragment"><div class="line">&lt;3D curve record 2&gt; = <span class="stringliteral">&quot;2&quot;</span> &lt;_&gt; &lt;3D circle center&gt; &lt;_&gt; &lt;3D circle N&gt; &lt;_&gt; &lt;3D circle Dx&gt; &lt;_&gt; &lt;3D circle Dy&gt; &lt;_&gt; &lt;3D circle radius&gt; &lt;_\n&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D circle center&gt; = &lt;3D point&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D circle N&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D circle Dx&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D circle Dy&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D circle radius&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;  </div>
<div class="ttc" id="a_adv_app2_var___data__f2c_8hxx_html_a031f8951175b43076c2084a6c2173410"><div class="ttname"><a href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a></div><div class="ttdeci">float real</div></div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;3D curve record 2&gt; describes a circle. The circle data consist of a 3D point <em>P</em>, pairwise orthogonal 3D directions <em>N</em>, *D<sub>x</sub>*&#160;and *D<sub>y</sub><em>&#160;and a non-negative real *r</em>. The circle has a center <em>P</em> and is located in a plane with a normal <em>N</em>. The circle has a radius <em>r</em>&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+r \cdot (cos(u) \cdot D_{x} + sin(u) \cdot D_{y}), \; u \in [o,\;2 \cdot \pi). \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a circle which has its center <em>P</em>=(1, 2, 3), is located in plane with a normal <em>N</em>=(0, 0 ,1). Directions for the circle are *D<sub>x</sub>*=(1, 0 ,0)&#160;and *D<sub>y</sub>*=(0, 1 ,0). The circle has a radius <em>r</em>=4&#160;and is defined by the following parametric equation: \( C(u) = (1,2,3) + 4 \cdot ( cos(u) \cdot(1,0,0) + sin(u) \cdot (0,1,0) ) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_1_3"></a>
Ellipse - &lt;3D curve record 3&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    3 1 2 3 0 0 1 1 0 -0 -0 1 0 5  4  
</pre><p><b>BNF-like Definition</b></p>
<div class="fragment"><div class="line">&lt;3D curve record 3&gt; = <span class="stringliteral">&quot;3&quot;</span> &lt;_&gt; &lt;3D ellipse center&gt; &lt;_&gt; &lt;3D ellipse N&gt; &lt;_&gt; &lt;3D ellipse Dmaj&gt; &lt;_&gt; &lt;3D ellipse Dmin&gt; &lt;_&gt; &lt;3D ellipse Rmaj&gt; &lt;_&gt; &lt;3D ellipse Rmin&gt; &lt;_\n&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D ellipse center&gt; = &lt;3D point&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D ellipse N&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D ellipse Dmaj&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D ellipse Dmin&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D ellipse Rmaj&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D ellipse Rmin&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;  </div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;3D curve record 3&gt; describes an ellipse. The ellipse data consist of a 3D point <em>P</em>, pairwise orthogonal 3D directions <em>N</em>, *D<sub>maj</sub>*&#160;and *D<sub>min</sub>*&#160;and non-negative reals *r<sub>maj</sub>*&#160;and *r<sub>min</sub>*&#160;so that *r<sub>min</sub>*&#160; \( \leq \) *r<sub>maj</sub>*. The ellipse has its center <em>P</em>, is located in plane with the normal <em>N</em>, has major and minor axis directions *D<sub>maj</sub>*&#160;and *D<sub>min</sub>*, major and minor radii *r<sub>maj</sub>*&#160;and *r<sub>min</sub>*&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+r_{maj} \cdot cos(u) \cdot D_{maj} + r_{min} \cdot sin(u) \cdot D_{min}, u \in [0, 2 \cdot \pi). \]
</p>
<p>The example record is interpreted as an ellipse which has its center <em>P</em>=(1, 2, 3), is located in plane with a normal <em>N</em>=(0, 0, 1), has major and minor axis directions *D<sub>maj</sub>*=(1, 0, 0)&#160;and *D<sub>min</sub>*=(0, 1, 0), major and minor radii *r<sub>maj</sub>*=5&#160;and *r<sub>min</sub>*=4&#160;and is defined by the following parametric equation: \( C(u) = (1,2,3) + 5 \cdot cos(u) \cdot(1,0,0) + 4 \cdot sin(u) \cdot (0,1,0) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_1_4"></a>
Parabola - &lt;3D curve record 4&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    4 1 2 3 0 0 1 1 0 -0 -0 1 0  16  
</pre><p><b>BNF-like Definition</b> <br  />
</p>
<div class="fragment"><div class="line">&lt;3D curve record 4&gt; = <span class="stringliteral">&quot;4&quot;</span> &lt;_&gt; &lt;3D parabola origin&gt; &lt;_&gt; &lt;3D parabola N&gt; &lt;_&gt; &lt;3D parabola Dx&gt; &lt;_&gt; &lt;3D parabola Dy&gt; &lt;_&gt; &lt;3D parabola focal <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a22dbc1f5ad19b7febaa98861409c1fe1">length</a>&gt; &lt;_\n&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D parabola origin&gt; = &lt;3D point&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D parabola N&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D parabola Dx&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D parabola Dy&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D parabola focal <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a22dbc1f5ad19b7febaa98861409c1fe1">length</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;  </div>
<div class="ttc" id="anamespaceopencascade_html_a22dbc1f5ad19b7febaa98861409c1fe1"><div class="ttname"><a href="../../refman/html/namespaceopencascade.html#a22dbc1f5ad19b7febaa98861409c1fe1">length</a></div><div class="ttdeci">GLintptr GLsizeiptr length</div></div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;3D curve record 4&gt; describes a parabola. The parabola data consist of a 3D point <em>P</em>, pairwise orthogonal 3D directions <em>N</em>, *D<sub>x</sub>*&#160;and *D<sub>y</sub><em>&#160;and a non-negative real *f</em>. The parabola is located in plane which passes through the point <em>P</em>&#160;and has the normal <em>N</em>. The parabola has a focus length <em>f</em>&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+\frac{u^{2}}{4 \cdot f} \cdot D_{x} + u \cdot D_{y}, u \in (-\infty,\; \infty) \Leftarrow f \neq 0; \]
</p>
 <p class="formulaDsp">
\[ C(u)=P+u \cdot D_{x}, u \in (-\infty,\; \infty) \Leftarrow f = 0\;(degenerated\;case). \]
</p>
<p>The example record is interpreted as a parabola in plane which passes through a point <em>P</em>=(1, 2, 3)&#160;and has a normal <em>N</em>=(0, 0, 1). Directions for the parabola are *D<sub>x</sub>*=(1, 0, 0)&#160;and *D<sub>y</sub>*=(0, 1, 0). The parabola has a focus length <em>f</em>=16&#160;and is defined by the following parametric equation: \( C(u) = (1,2,3) + \frac{u^{2}}{64} \cdot (1,0,0) + u \cdot (0,1,0) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_1_5"></a>
Hyperbola - &lt;3D curve record 5&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    5 1 2 3 0 0 1 1 0 -0 -0 1 0 5  4  
</pre><p><b>BNF-like Definition</b> <br  />
</p>
<div class="fragment"><div class="line">&lt;3D curve record 5&gt; = <span class="stringliteral">&quot;5&quot;</span> &lt;_&gt; &lt;3D hyperbola origin&gt; &lt;_&gt; &lt;3D hyperbola N&gt; &lt;_&gt; &lt;3D hyperbola Dx&gt; &lt;_&gt; &lt;3D hyperbola Dy&gt; &lt;_&gt; &lt;3D hyperbola Kx&gt; &lt;_&gt; &lt;3D hyperbola Ky&gt; &lt;_\n&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D hyperbola origin&gt; = &lt;3D point&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D hyperbola N&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D hyperbola Dx&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D hyperbola Dy&gt; = &lt;3D direction&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D hyperbola Kx&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;  </div>
<div class="line"> </div>
<div class="line">&lt;3D hyperbola Ky&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;  </div>
</div><!-- fragment --><p><b>Description</b></p>
<p>&lt;3D curve record 5&gt; describes a hyperbola. The hyperbola data consist of a 3D point <em>P</em>, pairwise orthogonal 3D directions <em>N</em>, *D<sub>x</sub>*&#160;and *D<sub>y</sub>*&#160;and non-negative reals *k<sub>x</sub>*&#160;and *k<sub>y</sub>*. The hyperbola is located in plane which passes through the point <em>P</em>&#160;and has the normal <em>N</em>. The hyperbola is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+k_{x} \cdot cosh(u) \cdot D_{x}+k_{y} \cdot sinh(u) \cdot D_{y} , u \in (-\infty,\; \infty). \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a hyperbola in plane which passes through a point <em>P</em>=(1, 2, 3)&#160;and has a normal <em>N</em>=(0, 0, 1). Other hyperbola data are *D<sub>x</sub>*=(1, 0, 0), *D<sub>y</sub>*=(0, 1, 0), *k<sub>x</sub>*=5&#160;and *k<sub>y</sub>*=4. The hyperbola is defined by the following parametric equation: \( C(u) = (1,2,3) + 5 \cdot cosh(u) \cdot (1,0,0) +4 \cdot sinh(u) \cdot (0,1,0) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_1_6"></a>
Bezier Curve - &lt;3D curve record 6&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    6 1 2 0 1 0  4 1 -2 0  5 2 3  0  6   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;3D curve record 6&gt; = "6" &lt;_&gt; &lt;3D Bezier rational flag&gt; &lt;_&gt; &lt;3D Bezier degree&gt; 
    &lt;3D Bezier weight poles&gt; &lt;_\n&gt;;
        
    &lt;3D Bezier rational flag&gt; = &lt;flag&gt;;
        
    &lt;3D Bezier degree&gt; = &lt;int&gt;;

    3D Bezier weight poles&gt; = (&lt;_&gt; &lt;3D Bezier weight pole&gt;) ^ (&lt;3D Bezier degree&gt; &lt;+&gt; "1");

    &lt;3D Bezier weight pole&gt; = &lt;3D point&gt; [&lt;_&gt; &lt;real&gt;];
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;3D curve record 6&gt; describes a Bezier curve. The curve data consist of a rational <em>r</em>, a degree \( m \leq 25 \)&#160;and weight poles. <br  />
</p>
<p>The weight poles are <em>m</em>+1&#160;3D points *B<sub>0</sub> ... B<sub>m</sub><em>&#160;if the flag *r</em> is 0. The weight poles are <em>m</em>+1&#160;pairs *B<sub>0</sub>h<sub>0</sub> ... B<sub>m</sub>h<sub>m</sub><em>&#160;if flag *r</em>&#160;is 1. Here *B<sub>i</sub>*&#160;is a 3D point and *h<sub>i</sub>*&#160;is a positive real \( (0 \leq i \leq m) \). \( h_{i}=1\; (0 \leq i \leq m) \) if the flag <em>r</em>&#160;is 0. <br  />
</p>
<p>The Bezier curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u) = \frac{\sum_{i=0}^{m}B_{i} \cdot h_{i} \cdot C_{m}^{i} \cdot u^{i} \cdot (1-u)^{m-i}}{\sum_{i=0}^{m}h_{i} \cdot C_{m}^{i} \cdot u^{i} \cdot (1-u)^{m-i}},\;u \in [0,\; 1] \]
</p>
<p>where \( 0^{0} \equiv 1 \). <br  />
</p>
<p>The example record is interpreted as a Bezier curve with a rational flag <em>r</em>=1, degree <em>m</em>=2&#160;and weight poles *B<sub>0</sub>*=(0, 1, 0), *h<sub>0</sub>*=4, *B<sub>1</sub>*=(1, -2, 0), *h<sub>1</sub>*=5&#160;and *B<sub>2</sub>*=(2, 3, 0), *h<sub>2</sub>*=6. The Bezier curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=\frac{(0,1,0) \cdot 4 \cdot (1-u)^{2}+(1,-2,0) \cdot 5 \cdot 2 \cdot u \cdot (1-u) + (2,3,0) \cdot 6 \cdot u^{2} )}{4 \cdot (1-u)^{2}+5 \cdot 2 \cdot u \cdot (1-u)+6 \cdot u^{2}}. \]
</p>
<p> <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_1_7"></a>
B-Spline Curve - &lt;3D curve record 7&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    7 1 0  1 3 5  0 1 0  4 1 -2  0  5 2 3 0  6  
     0 1 0.25 1 0.5 1 0.75 1 1 1  
</pre><p><b>BNF-like Definition</b></p>
<div class="fragment"><div class="line">&lt;3D curve record 7&gt; = <span class="stringliteral">&quot;7&quot;</span> &lt;_&gt; &lt;3D B-spline rational <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; &lt;_&gt; <span class="stringliteral">&quot;0&quot;</span> &lt;_&gt; &lt;3D B-spline degree&gt; &lt;_&gt; </div>
<div class="line">&lt;3D B-spline pole <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; &lt;_&gt; &lt;3D B-spline multiplicity knot <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; &lt;3D B-spline weight poles&gt; </div>
<div class="line">&lt;_\n&gt; &lt;3D B-spline multiplicity knots&gt; &lt;_\n&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;3D B-spline rational <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;3D B-spline degree&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;3D B-spline pole <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;3D B-spline multiplicity knot <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;3D B-spline weight poles&gt; = (&lt;_&gt; &lt;3D B-spline weight pole&gt;) ^ &lt;3D B-spline pole <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;3D B-spline weight pole&gt; = &lt;3D point&gt; [&lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;];</div>
<div class="line"> </div>
<div class="line">&lt;3D B-spline multiplicity knots&gt; = (&lt;_&gt; &lt;3D B-spline multiplicity knot&gt;) ^ &lt;3D B-spline multiplicity knot <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;3D B-spline multiplicity knot&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt; &lt;_&gt; &lt;<span class="keywordtype">int</span>&gt;;  </div>
<div class="ttc" id="a_adv_app2_var___data__f2c_8hxx_html_abf5d144da384425ae6cb542ce6eec8d3"><div class="ttname"><a href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a></div><div class="ttdeci">long int flag</div></div>
<div class="ttc" id="anamespaceopencascade_html_a6f6ea6031c668433cc08c296d2755a20"><div class="ttname"><a href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a></div><div class="ttdeci">GLuint GLuint GLsizei count</div></div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;3D curve record 7&gt; describes a B-spline curve. The curve data consist of a rational flag <em>r</em>, a degree \( m \leq 25 \), pole count \( n \geq 2 \), multiplicity knot count <em>k</em>, weight poles and multiplicity knots. <br  />
</p>
<p>The weight poles are <em>n</em> 3D points *B<sub>1</sub> ... B<sub>n</sub><em>&#160;if the flag *r</em>&#160;is 0. The weight poles are <em>n</em>&#160;pairs *B<sub>1</sub>h<sub>1</sub> ... B<sub>n</sub>h<sub>n</sub><em>&#160;if the flag *r</em>&#160;is 1. Here *B<sub>i</sub>*&#160;is a 3D point and *h<sub>i</sub>*&#160;is a positive real \( (1 \leq i \leq n) \). \( h_{i}=1\; (1 \leq i \leq n) \) if the flag <em>r</em>&#160;is 0. <br  />
</p>
<p>The multiplicity knots are <em>k</em>&#160;pairs *u<sub>1</sub>q<sub>1</sub> ... u<sub>k</sub>q<sub>k</sub>*. Here *u<sub>i</sub>*&#160;is a knot with a multiplicity \( q_{i} \geq 1 \; (1 \leq i \leq k) \) so that <br  />
</p>
<p class="formulaDsp">
\[ u_{i} &lt; u_{i+1} (1 \leq i \leq k-1),\]
</p>
 <p class="formulaDsp">
\[ q_{1} \leq m+1,\; q_{k} \leq m+1,\; q_{i} \leq m\; (2 \leq i \leq k-1), \sum_{i=1}^{k}q_{i}=m+n+1. \]
</p>
<p> <br  />
</p>
<p>The B-spline curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u) = \frac{\sum_{i=1}^{n}B_{i} \cdot h_{i} \cdot N_{i,m+1}(u)}{\sum_{i=1}^{n}h_{i} \cdot N_{i,m+1}(u)},\;u \in [u_{1},\; u_{k}] \]
</p>
<p>where functions \( N_{i,j} \)&#160;have the following recursion definition by <em>j</em>: <br  />
</p>
<p class="formulaDsp">
\[ N_{i,1}(u)=\left\{\begin{matrix} 1\Leftarrow \bar{u}_{i} \leq u \leq \bar{u}_{i+1}\\ 0\Leftarrow u &lt; \bar{u}_{i} \vee \bar{u}_{i+1} \leq u \end{matrix} \right.,\; N_{i,j}(u)=\frac{(u-\bar{u}_{i}) \cdot N_{i,j-1}(u) }{\bar{u}_{i+j-1}-\bar{u}_{i}}+ \frac{(\bar{u}_{i+j}-u) \cdot N_{i+1,j-1}(u)}{\bar{u}_{i+j}-\bar{u}_{i+1}},\;(2 \leq j \leq m+1) \]
</p>
<p>where</p>
<p class="formulaDsp">
\[ \bar{u}_{i} = u_{j},\; (1 \leq j \leq k,\; \sum_{l=1}^{j-1}q_{l}+1 \leq i \leq \sum_{l=1}^{j}q_{l} ). \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a B-spline curve with a rational flag <em>r</em>=1, a degree <em>m</em>=1, pole count <em>n</em>=3, multiplicity knot count <em>k</em>=5, weight poles *B<sub>1</sub>*=(0,1,0), *h<sub>1</sub>*=4, *B<sub>2</sub>*=(1,-2,0), *h<sub>2</sub>*=5 and *B<sub>3</sub>*=(2,3,0), *h<sub>3</sub>*=6, multiplicity knots *u<sub>1</sub>*=0, *q<sub>1</sub>*=1, *u<sub>2</sub>*=0.25, *q<sub>2</sub>*=1, *u<sub>3</sub>*=0.5, *q<sub>3</sub>*=1, *u<sub>4</sub>*=0.75, *q<sub>4</sub>*=1&#160;and *u<sub>5</sub>*=1, *q<sub>5</sub>*=1. The B-spline curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=\frac{(0,1,0) \cdot 4 \cdot N_{1,2}(u) + (1,-2,0) \cdot 5 \cdot N_{2,2}(u)+(2,3,0) \cdot 6 \cdot N_{3,2}(u)}{4 \cdot N_{1,2}(u)+5 \cdot N_{2,2}(u)+6 \cdot N_{3,2}(u)}. \]
</p>
<p> <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_1_8"></a>
Trimmed Curve - &lt;3D curve record 8&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    8  -4 5  
    1 1 2 3 1 0 0   
</pre><p><b>BNF-like Definition</b> <br  />
</p>
<div class="fragment"><div class="line">&lt;3D curve record 8&gt; = <span class="stringliteral">&quot;8&quot;</span> &lt;_&gt; &lt;3D trimmed curve u min&gt; &lt;_&gt; &lt;3D trimmed curve u max&gt; &lt;_\n&gt; &lt;3D curve record&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;3D trimmed curve u min&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;3D trimmed curve u max&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;  </div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;3D curve record 8&gt; describes a trimmed curve. The trimmed curve data consist of reals *u<sub>min</sub>*&#160;and *u<sub>max</sub>*&#160;and &lt;3D curve record&gt; so that *u<sub>min</sub>* &lt; *u<sub>max</sub>*. The trimmed curve is a restriction of the base curve <em>B</em>&#160;described in the record to the segment \( [u_{min},\;u_{max}]\subseteq domain(B) \). The trimmed curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=B(u),\; u \in [u_{min},\;u_{max}]. \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a trimmed curve with *u<sub>min</sub>*=-4&#160;and *u<sub>max</sub>*=5&#160;for the base curve \( B(u)=(1,2,3)+u \cdot (1,0,0) \). The trimmed curve is defined by the following parametric equation: \( C(u)=(1,2,3)+u \cdot (1,0,0),\; u \in [-4,\; 5] \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_1_9"></a>
Offset Curve - &lt;3D curve record 9&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    9 2  
    0 1 0   
    1 1 2 3 1 0 0   
</pre><p><b>BNF-like Definition</b> <br  />
</p>
<pre class="fragment">    &lt;3D curve record 9&gt; = "9" &lt;_&gt; &lt;3D offset curve distance&gt; &lt;_\n&gt;;
    &lt;3D offset curve direction&gt; &lt;_\n&gt;;
    &lt;3D curve record&gt;;

    &lt;3D offset curve distance&gt; = &lt;real&gt;;

    &lt;3D offset curve direction&gt; = &lt;3D direction&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;3D curve record 9&gt; describes an offset curve. The offset curve data consist of a distance <em>d</em>, a 3D direction <em>D</em>&#160;and a &lt;3D curve record&gt;. The offset curve is the result of offsetting the base curve <em>B</em>&#160;described in the record to the distance <em>d</em>&#160;along the vector \( [B&#39;(u),\; D] \neq \vec{0} \). The offset curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=B(u)+d \cdot \frac{[B&#39;(u),\; D]}{|[B&#39;(u),\; D]|},\; u \in domain(B) . \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as an offset curve with a distance <em>d</em>=2, direction <em>D</em>=(0, 1, 0), base curve \( B(u)=(1,2,3)+u \cdot (1,0,0) \)&#160;and defined by the following parametric equation: \( C(u)=(1,2,3)+u \cdot (1,0,0)+2 \cdot (0,0,1) \). <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_5_2"></a>
Surfaces</h2>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    Surfaces 6  
    1 0 0 0 1 0 -0 0 0 1 0 -1 0   
    1 0 0 0 -0 1 0 0 0 1 1 0 -0   
    1 0 0 3 0 0 1 1 0 -0 -0 1 0   
    1 0 2 0 -0 1 0 0 0 1 1 0 -0   
    1 0 0 0 0 0 1 1 0 -0 -0 1 0   
    1 1 0 0 1 0 -0 0 0 1 0 -1 0   
</pre><p><b>BNF-like Definition</b> <br  />
</p>
<pre class="fragment">    &lt;surfaces&gt; = &lt;surface header&gt; &lt;_\n&gt; &lt;surface records&gt;;

    &lt;surface header&gt; = “Surfaces” &lt;_&gt; &lt;surface count&gt;;

    &lt;surface records&gt; = &lt;surface record&gt; ^ &lt;surface count&gt;;

    &lt;surface record&gt; =
    &lt;surface record 1&gt; |
    &lt;surface record 2&gt; |
    &lt;surface record 3&gt; |
    &lt;surface record 4&gt; |
    &lt;surface record 5&gt; |
    &lt;surface record 6&gt; |
    &lt;surface record 7&gt; |
    &lt;surface record 8&gt; |
    &lt;surface record 9&gt; |
    &lt;surface record 10&gt; |
    &lt;surface record 11&gt;;  
</pre><h3><a class="anchor" id="specification__brep_format_5_2_1"></a>
Plane - &lt; surface record 1 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    1 0 0 3 0 0 1 1 0 -0 -0 1 0   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;surface record 1&gt; = "1" &lt;_&gt; &lt;3D point&gt; (&lt;_&gt; &lt;3D direction&gt;) ^ 3 &lt;_\n&gt;;
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 1&gt; describes a plane. The plane data consist of a 3D point <em>P</em>&#160;and pairwise orthogonal 3D directions <em>N</em>, *D<sub>u</sub>*&#160;and *D<sub>v</sub>*. The plane passes through the point <em>P</em>, has the normal <em>N</em>&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=P+u \cdot D_{u}+v \cdot D_{v},\; (u,\;v) \in (-\infty,\; \infty) \times (-\infty,\; \infty). \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a plane which passes through a point <em>P</em>=(0, 0, 3), has a normal <em>N</em>=(0, 0, 1)&#160;and is defined by the following parametric equation: \( S(u,v)=(0,0,3)+u \cdot (1,0,0) + v \cdot (0,1,0) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_2_2"></a>
Cylinder - &lt; surface record 2 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    2 1 2 3 0 0 1 1 0 -0 -0 1 0 4  
</pre><p><b>BNF-like Definition</b> <br  />
</p>
<pre class="fragment">    &lt;surface record 2&gt; = "2" &lt;_&gt; &lt;3D point&gt; (&lt;_&gt; &lt;3D direction&gt;) ^ 3 &lt;_&gt; &lt;real&gt; &lt;_\n&gt;;
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 2&gt; describes a cylinder. The cylinder data consist of a 3D point <em>P</em>, pairwise orthogonal 3D directions *D<sub>v</sub>*, *D<sub>X</sub>* and *D<sub>Y</sub><em>&#160;and a non-negative real *r</em>. The cylinder axis passes through the point <em>P</em>&#160;and has the direction *D<sub>v</sub>*. The cylinder has the radius <em>r</em>&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=P+r \cdot (cos(u) \cdot D_{x}+sin(u) \cdot D_{y} )+v \cdot D_{v},\; (u,v) \in [0,\; 2 \cdot \pi) \times (-\infty,\; \infty) . \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a cylinder which axis passes through a point <em>P</em>=(1, 2, 3)&#160;and has a direction *D<sub>v</sub>*=(0, 0, 1). Directions for the cylinder are *D<sub>X</sub>*=(1,0,0)&#160;and *D<sub>Y</sub>*=(0,1,0). The cylinder has a radius <em>r</em>=4&#160;and is defined by the following parametric equation: \( S(u,v)=(1,2,3)+4 \cdot ( cos(u) \cdot D_{X} + sin(u) \cdot D_{Y} ) + v \cdot D_{v}. \) <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_2_3"></a>
Cone - &lt; surface record 3 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    3 1 2 3 0 0 1 1 0 -0 -0 1 0 4  
    0.75
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;surface record 3&gt; = "3" &lt;_&gt; &lt;3D point&gt; (&lt;_&gt; &lt;3D direction&gt;) ^ 3 (&lt;_&gt; &lt;real&gt;) ^ 2 &lt;_\n&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 3&gt; describes a cone. The cone data consist of a 3D point <em>P</em>, pairwise orthogonal 3D directions *D<sub>Z</sub>*, *D<sub>X</sub>* and *D<sub>Y</sub>*, a non-negative real <em>r</em>&#160;and a real \( \varphi \in (-\pi /2,\; \pi/2)/\left \{ 0 \right \} \). The cone axis passes through the point <em>P</em>&#160;and has the direction *D<sub>Z</sub>*. The plane which passes through the point <em>P</em>&#160;and is parallel to directions *D<sub>X</sub>*&#160;and *D<sub>Y</sub><em>&#160;is the cone referenced plane. The cone section by the plane is a circle with the radius *r</em>. The direction from the point <em>P</em>&#160;to the cone apex is \( -sgn(\varphi) \cdot D_{Z} \). The cone has a half-angle \(| \varphi | \)&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=P+(r+v \cdot sin(\varphi)) \cdot (cos(u) \cdot D_{X}+sin(u) \cdot D_{Y})+v \cdot cos(\varphi) \cdot D_{Z}, (u,v) \in [0,\; 2 \cdot \pi) \times (-\infty,\; \infty) . \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a cone with an axis which passes through a point <em>P</em>=(1, 2, 3)&#160;and has a direction *D<sub>Z</sub>*=(0, 0, 1). Other cone data are *D<sub>X</sub>*=(1, 0, 0), *D<sub>Y</sub>*=(0, 1, 0), <em>r</em>=4&#160;and \( \varphi = 0.75 \). The cone is defined by the following parametric equation: <br  />
 </p><p class="formulaDsp">
\[ S(u,v)=(1,2,3)+( 4 + v \cdot sin(0.75)) \cdot ( cos(u) \cdot (1,0,0) + sin(u) \cdot (0,1,0) ) + v \cdot cos(0.75) \cdot (0,0,1) . \]
</p>
<p> <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_2_4"></a>
Sphere - &lt; surface record 4 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    4 1 2 3 0 0 1 1 0 -0 -0 1 0 4  
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;surface record 4&gt; = "4" &lt;_&gt; &lt;3D point&gt; (&lt;_&gt; &lt;3D direction&gt;) ^ 3 &lt;_&gt; &lt;real&gt; &lt;_\n&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 4&gt; describes a sphere. The sphere data consist of a 3D point <em>P</em>, pairwise orthogonal 3D directions *D<sub>Z</sub>*, *D<sub>X</sub>* and *D<sub>Y</sub><em>&#160;and a non-negative real *r</em>. The sphere has the center <em>P</em>, radius <em>r</em>&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=P+r \cdot cos(v) \cdot (cos(u) \cdot D_{x}+sin(u) \cdot D_{y} ) +r \cdot sin(v) \cdot D_{Z},\; (u,v) \in [0,\;2 \cdot \pi) \times [-\pi /2,\; \pi /2] . \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a sphere with its center <em>P</em>=(1, 2, 3). Directions for the sphere are *D<sub>Z</sub>*=(0, 0, 1), *D<sub>X</sub>*=(1, 0, 0)&#160;and *D<sub>Y</sub>*=(0, 1, 0). The sphere has a radius <em>r</em>=4&#160;and is defined by the following parametric equation: <br  />
 </p><p class="formulaDsp">
\[ S(u,v)=(1,2,3)+ 4 \cdot cos(v) \cdot ( cos(u) \cdot (1,0,0) + sin(u) \cdot (0,1,0) ) + 4 \cdot sin(v) \cdot (0,0,1) . \]
</p>
<p> <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_2_5"></a>
Torus - &lt; surface record 5 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    5 1 2 3 0 0 1 1 0 -0 -0 1 0 8  4  
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;surface record 5&gt; = "5" &lt;_&gt; &lt;3D point&gt; (&lt;_&gt; &lt;3D direction&gt;) ^ 3 (&lt;_&gt; &lt;real&gt;) ^ 2 &lt;_\n&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 5&gt; describes a torus. The torus data consist of a 3D point <em>P</em>, pairwise orthogonal 3D directions *D<sub>Z</sub>*, *D<sub>X</sub>* and *D<sub>Y</sub>*&#160;and non-negative reals *r<sub>1</sub>*&#160;and *r<sub>2</sub>*. The torus axis passes through the point <em>P</em>&#160;and has the direction *D<sub>Z</sub>*. *r<sub>1</sub>*&#160;is the distance from the torus circle center to the axis. The torus circle has the radius *r<sub>2</sub>*. The torus is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=P+(r_{1}+r_{2} \cdot cos(v)) \cdot (cos(u) \cdot D_{x}+sin(u) \cdot D_{y} ) +r_{2} \cdot sin(v) \cdot D_{Z},\; (u,v) \in [0,\;2 \cdot \pi) \times [0,\; 2 \cdot \pi) . \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a torus with an axis which passes through a point <em>P</em>=(1, 2, 3)&#160;and has a direction *D<sub>Z</sub>*=(0, 0, 1). *D<sub>X</sub>*=(1, 0, 0), *D<sub>Y</sub>*=(0, 1, 0), *r<sub>1</sub>*=8&#160;and *r<sub>2</sub>*=4&#160;for the torus. The torus is defined by the following parametric equation: <br  />
 </p><p class="formulaDsp">
\[ S(u,v)=(1,2,3)+ (8+4 \cdot cos(v)) \cdot ( cos(u) \cdot (1,0,0) + sin(u) \cdot (0,1,0) ) + 4 \cdot sin(v) \cdot (0,0,1) . \]
</p>
<p> <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_2_6"></a>
Linear Extrusion - &lt; surface record 6 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    6 0 0.6 0.8   
    2 1 2 3 0 0 1 1 0 -0 -0 1 0 4  
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;surface record 6&gt; = "6" &lt;_&gt; &lt;3D direction&gt; &lt;_\n&gt; &lt;3D curve record&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 6&gt; describes a linear extrusion surface. The surface data consist of a 3D direction *D<sub>v</sub>*&#160;and a &lt;3D curve record&gt;. The linear extrusion surface has the direction *D<sub>v</sub>*, the base curve <em>C</em>&#160;described in the record and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=C(u)+v \cdot D_{v},\; (u,v) \in domain(C) \times (-\infty,\; \infty) . \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a linear extrusion surface with a direction *D<sub>v</sub>*=(0, 0.6, 0.8). The base curve is a circle for the surface. The surface is defined by the following parametric equation:</p>
<p class="formulaDsp">
\[ S(u,v)=(1,2,3)+4 \cdot (cos(u) \cdot (1,0,0)+sin(u) \cdot (0,1,0))+v \cdot (0, 0.6, 0.8),\; (u,v) \in [0,\; 2 \cdot \pi) \times (-\infty,\; \infty). \]
</p>
<p> <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_2_7"></a>
Revolution Surface - &lt; surface record 7 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    7 -4 0 3 0 1 0   
    2 1 2 3 0 0 1 1 0 -0 -0 1 0 4  
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;surface record 7&gt; = "7" &lt;_&gt; &lt;3D point&gt; &lt;_&gt; &lt;3D direction&gt; &lt;_\n&gt; &lt;3D curve record&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 7&gt; describes a revolution surface. The surface data consist of a 3D point <em>P</em>, a 3D direction <em>D</em>&#160;and a &lt;3D curve record&gt;. The surface axis passes through the point <em>P</em>&#160;and has the direction <em>D</em>. The base curve <em>C</em>&#160;described by the record and the axis are coplanar. The surface is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)= P+V_{D}(v)+cos(u) \cdot (V(v)-V_{D}(v))+sin(u) \cdot [D,V(v)],\;(u,v) \in [0,\; 2 \cdot \pi)\times domain(C) \]
</p>
<p>where \( V(v)=C(v)-P, V_{D}(v)=(D,V(v)) \cdot D \). <br  />
</p>
<p>The example record is interpreted as a revolution surface with an axis which passes through a point <em>P</em>=(-4, 0, 3)&#160;and has a direction <em>D</em>=(0, 1, 0). The base curve is a circle for the surface. The surface is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)= (-4,0,3)+V_{D}(v)+cos(u) \cdot (V(v)-V_{D}(v))+sin(u) \cdot [(0,1,0),V(v)],\;(u,v) \in [0,\; 2 \cdot \pi)\times [0,\; 2 \cdot \pi) \]
</p>
<p>where \( V(v)=(5,2,0)+4 \cdot (cos(v) \cdot (1,0,0)+sin(v) \cdot (0,1,0)), V_{D}(v)=((0,1,0),V(v)) \cdot (0,1,0) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_2_8"></a>
Bezier Surface - &lt; surface record 8 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    8 1 1 2 1 0 0 1  7 1 0 -4  10    
    0 1 -2  8 1 1 5  11   
    0 2 3  9 1 2 6  12   
</pre><p><b>BNF-like Definition</b></p>
<div class="fragment"><div class="line">&lt;surface record 8&gt; = <span class="stringliteral">&quot;8&quot;</span> &lt;_&gt; &lt;Bezier surface u rational <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; &lt;_&gt; &lt;Bezier surface <a class="codeRef" href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a> rational <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; &lt;_&gt; &lt;Bezier surface u degree&gt; &lt;_&gt; &lt;Bezier surface <a class="codeRef" href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a> degree&gt; &lt;_&gt; </div>
<div class="line">&lt;Bezier surface weight poles&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;Bezier surface u rational <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;Bezier surface <a class="codeRef" href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a> rational <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;Bezier surface u degree&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;Bezier surface <a class="codeRef" href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a> degree&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;Bezier surface weight poles&gt; =</div>
<div class="line">(&lt;Bezier surface weight pole group&gt; &lt;_\n&gt;) ^ (&lt;Bezier surface u degree&gt; &lt;+&gt; <span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="line"> </div>
<div class="line">&lt;Bezier surface weight pole group&gt; = &lt;Bezier surface weight pole&gt;</div>
<div class="line">(&lt;_&gt; &lt;Bezier surface weight pole&gt;) ^ &lt;Bezier surface <a class="codeRef" href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a> degree&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;Bezier surface weight pole&gt; = &lt;3D point&gt; [&lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;];  </div>
<div class="ttc" id="anamespaceopencascade_html_afebb5dc277cef37d6dc94421db317ebb"><div class="ttname"><a href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a></div><div class="ttdeci">const GLint * v</div></div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 8&gt; describes a Bezier surface. The surface data consist of a u rational flag *r<sub>u</sub>*, v rational flag *r<sub>v</sub>*, u degree \( m_{u} \leq 25 \), v degree \( m_{v} \leq 25 \)&#160;and weight poles. <br  />
</p>
<p>The weight poles are \( (m_{u}+1) \cdot (m_{v}+1) \)&#160;3D points \( B_{i,j}\; ((i,j) \in \left \{ 0,...,m_{u} \right \} \times \left \{ 0,...,m_{v} \right \}) \) if \( r_{u}+r_{v}=0 \). The weight poles are \( (m_{u}+1) \cdot (m_{v}+1) \)&#160;pairs \( B_{i,j}h_{i,j}\; ((i,j) \in \left \{ 0,...,m_{u} \right \} \times \left \{ 0,...,m_{v} \right \}) \) if \( r_{u}+r_{v} \neq 0 \). Here \( B_{i,j} \)&#160;is a 3D point and \( h_{i,j} \)&#160;is a positive real \( ((i,j) \in \left \{ 0,...,m_{u} \right \} \times \left \{ 0,...,m_{v} \right \}) \). \( h_{i,j}=1\; ((i,j) \in \left \{ 0,...,m_{u} \right \} \times \left \{ 0,...,m_{v} \right \}) \) if \( r_{u}+r_{v} = 0 \). <br  />
</p>
<p>The Bezier surface is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=\frac{\sum_{i=0}^{m_{u}} \sum_{j=0}^{m_{v}} B_{i,j} \cdot h_{i,j} \cdot C_{m_{u}}^{i} \cdot u^{i} \cdot (1-u)^{m_{u}-i} \cdot C_{m_{v}}^{j} \cdot v^{j} \cdot (1-v)^{m_{v}-j}}{\sum_{i=0}^{m_{u}} \sum_{j=0}^{m_{v}} h_{i,j} \cdot C_{m_{u}}^{i} \cdot u^{i} \cdot (1-u)^{m_{u}-i} \cdot C_{m_{v}}^{j} \cdot v^{j} \cdot (1-v)^{m_{v}-j}}, (u,v) \in [0,1] \times [0,1] \]
</p>
<p> <br  />
</p>
<p>where \( 0^{0} \equiv 1 \). <br  />
</p>
<p>The example record is interpreted as a Bezier surface with a u rational flag *r<sub>u</sub>*=1, v rational flag *r<sub>v</sub>*=1, u degree *m<sub>u</sub>*=2, v degree *m<sub>v</sub>*=1, weight poles *B<sub>0,0</sub>*=(0, 0, 1), *h<sub>0,0</sub>*=7, *B<sub>0,1</sub>*=(1, 0, -4), *h<sub>0,1</sub>*=10, *B<sub>1,0</sub>*=(0, 1, -2), *h<sub>1,0</sub>*=8, *B<sub>1,1</sub>*=(1, 1, 5), *h<sub>1,1</sub>*=11, *B<sub>2,0</sub>*=(0, 2, 3), *h<sub>2,0</sub>*=9&#160;and *B<sub>2,1</sub>*=(1, 2, 6), *h<sub>2,1</sub>*=12. The surface is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ \begin{align} S(u,v)= [ (0,0,1) \cdot 7 \cdot (1-u)^{2} \cdot (1-v)+(1,0,-4) \cdot 10 \cdot (1-u)^{2} \cdot v+ (0,1,-2) \cdot 8 \cdot 2 \cdot u \cdot (1-u) \cdot (1-v) + \\ (1,1,5) \cdot 11 \cdot 2 \cdot u \cdot (1-u) \cdot v+ (0,2,3) \cdot 9 \cdot u^{2} \cdot (1-v)+(1,2,6) \cdot 12 \cdot u^{2} \cdot v] \div [7 \cdot (1-u)^{2} \cdot (1-v)+ \\ 10 \cdot (1-u)^{2} \cdot v+ 8 \cdot 2 \cdot u \cdot (1-u) \cdot (1-v)+ 11 \cdot 2 \cdot u \cdot (1-u) \cdot v+ 9 \cdot u^{2} \cdot (1-v)+12 \cdot u^{2} \cdot v ] \end{align} \]
</p>
<h3><a class="anchor" id="specification__brep_format_5_2_9"></a>
B-spline Surface - &lt; surface record 9 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    9  1 1 0 0 1 1 3 2 5 4 0 0 1  7 1 0 -4  10   
    0  1 -2  8 1 1 5  11   
    0  2 3  9 1 2 6  12   
     
    0  1  
    0.25  1  
    0.5  1  
    0.75  1  
    1  1  
     
    0  1  
    0.3  1  
    0.7  1  
    1 1  
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;surface record 9&gt; = "9" &lt;_&gt; &lt;B-spline surface u rational flag&gt; &lt;_&gt; 
    &lt;B-spline surface v rational flag&gt; &lt;_&gt; "0" &lt;_&gt; "0" &lt;_&gt; &lt;B-spline surface u degree&gt; &lt;_&gt; 
    &lt;B-spline surface v degree&gt; &lt;_&gt; &lt;B-spline surface u pole count&gt; &lt;_&gt; 
    &lt;B-spline surface v pole count&gt; &lt;_&gt; &lt;B-spline surface u multiplicity knot count&gt; &lt;_&gt; 
    &lt;B-spline surface v multiplicity knot count&gt; &lt;_&gt; &lt;B-spline surface weight poles&gt; &lt;_\n&gt; 
    &lt;B-spline surface u multiplicity knots&gt; &lt;_\n&gt; &lt;B-spline surface v multiplicity knots&gt;;

    &lt;B-spline surface u rational flag&gt; = &lt;flag&gt;;

    &lt;B-spline surface v rational flag&gt; = &lt;flag&gt;;

    &lt;B-spline surface u degree&gt; = &lt;int&gt;;

    &lt;B-spline surface v degree&gt; = &lt;int&gt;;

    &lt;B-spline surface u pole count&gt; = &lt;int&gt;;

    &lt;B-spline surface v pole count&gt; = &lt;int&gt;;

    &lt;B-spline surface u multiplicity knot count&gt; = &lt;int&gt;;

    &lt;B-spline surface v multiplicity knot count&gt; = &lt;int&gt;;

    &lt;B-spline surface weight poles&gt; =
    (&lt;B-spline surface weight pole group&gt; &lt;_\n&gt;) ^ &lt;B-spline surface u pole count&gt;;

    &lt;B-spline surface weight pole group&gt; =
    (&lt;B-spline surface weight pole&gt; &lt;_&gt;) ^ &lt;B-spline surface v pole count&gt;;

    &lt;B-spline surface weight pole&gt; = &lt;3D point&gt; [&lt;_&gt; &lt;real&gt;];

    &lt;B-spline surface u multiplicity knots&gt; =
    (&lt;B-spline surface u multiplicity knot&gt; &lt;_\n&gt;) ^ &lt;B-spline surface u multiplicity knot count&gt;;

    &lt;B-spline surface u multiplicity knot&gt; = &lt;real&gt; &lt;_&gt; &lt;int&gt;;

    &lt;B-spline surface v multiplicity knots&gt; =
    (&lt;B-spline surface v multiplicity knot&gt; &lt;_\n&gt;) ^ &lt;B-spline surface v multiplicity knot count&gt;;

    &lt;B-spline surface v multiplicity knot&gt; = &lt;real&gt; &lt;_&gt; &lt;int&gt;;
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 9&gt; describes a B-spline surface. The surface data consist of a u rational flag *r<sub>u</sub>*, v rational flag *r<sub>v</sub>*, u degree \( m_{u} \leq 25 \), v degree \( m_{v} \leq 25 \), u pole count \( n_{u} \geq 2 \), v pole count \( n_{v} \geq 2 \), u multiplicity knot count *k<sub>u</sub>*, v multiplicity knot count *k<sub>v</sub>*, weight poles, u multiplicity knots, v multiplicity knots. <br  />
</p>
<p>The weight poles are \( n_{u} \cdot n_{v} \)&#160;3D points \( B_{i,j}\; ((i,j) \in \left \{ 1,...,n_{u} \right \} \times \left \{ 1,...,n_{v} \right \}) \) if \( r_{u}+r_{v}=0 \). The weight poles are \( n_{u} \cdot n_{v} \)&#160;pairs \( B_{i,j}h_{i,j}\; ((i,j) \in \left \{ 1,...,n_{u} \right \} \times \left \{ 1,...,n_{v} \right \}) \) if \( r_{u}+r_{v} \neq 0 \). Here \( B_{i,j} \)&#160;is a 3D point and \( h_{i,j} \)&#160;is a positive real \( ((i,j) \in \left \{ 1,...,n_{u} \right \} \times \left \{ 1,...,n_{v} \right \}) \). \( h_{i,j}=1\; ((i,j) \in \left \{ 1,...,n_{u} \right \} \times \left \{ 1,...,n_{v} \right \}) \) if \( r_{u}+r_{v} = 0 \). <br  />
</p>
<p>The u multiplicity knots are *k<sub>u</sub>*&#160;pairs \( u_{1}q_{1} ... u_{k_{u}}q_{k_{u}} \). Here \( u_{i} \)&#160;is a knot with multiplicity \( q_{i} \geq 1 \;(1\leq i\leq k_{u}) \) so that <br  />
</p>
<p class="formulaDsp">
\[ u_{i} &lt; u_{i+1} \; (1\leq i\leq k_{u}-1), \\ q_{1} \leq m_{u}+1,\; q_{k_{u}} \leq m_{u}+1,\; q_{i} \leq m_{u}\; (2\leq i\leq k_{u}-1),\; \sum_{i=1}^{k_{u}}q_{i}=m_{u}+n_{u}+1. \]
</p>
<p>The v multiplicity knots are *k<sub>v</sub>*&#160;pairs \( v_{1}t_{1} ... v_{k_{v}}t_{k_{v}} \). Here \( v_{j} \)&#160;is a knot with multiplicity \( t_{i} \geq 1\;(1\leq i\leq k_{v}) \) so that <br  />
</p>
<p class="formulaDsp">
\[ v_{j} &lt; v_{j+1} \; (1\leq j\leq k_{v}-1), \\ t_{1} \leq m_{v}+1,\; t_{k_{v}} \leq m_{v}+1,\; t_{j} \leq m_{v}\; (2\leq j\leq k_{v}-1),\; \sum_{j=1}^{k_{v}}t_{j}=m_{v}+n_{v}+1. \]
</p>
<p>The B-spline surface is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=\frac{\sum_{i=1}^{n_{u}} \sum_{j=1}^{n_{v}} B_{i,j} \cdot h_{i,j} \cdot N_{i,m_{u}+1}(u) \cdot M_{j,m_{v}+1}(v)}{\sum_{i=1}^{n_{u}} \sum_{j=1}^{n_{v}} h_{i,j} \cdot N_{i,m_{u}+1}(u) \cdot M_{j,m_{v}+1}(v)}, (u,v) \in [u_{1},u_{k_{u}}] \times [v_{1},v_{k_{v}}] \]
</p>
<p> <br  />
</p>
<p>where functions *N<sub>i,j</sub>*&#160;and *M<sub>i,j</sub><em>&#160;have the following recursion definition by *j</em>: <br  />
</p>
<p class="formulaDsp">
\[ \begin{align} N_{i,1}(u)= \left\{\begin{matrix} 1\Leftarrow \bar{u}_{i} \leq u \leq \bar{u}_{i+1} 0\Leftarrow u &lt; \bar{u}_{i} \vee \bar{u}_{i+1} \leq u \end{matrix} \right.,\; \\ N_{i,j}(u)=\frac{(u-\bar{u}_{i}) \cdot N_{i,j-1}(u) }{\bar{u}_{i+j-1}-\bar{u}_{i}}+ \frac{(\bar{u}_{i+j}-u) \cdot N_{i+1,j-1}(u)}{\bar{u}_{i+j}-\bar{u}_{i+1}},\;(2 \leq j \leq m_{u}+1), \; \\ M_{i,1}(v)=\left\{\begin{matrix} 1\Leftarrow \bar{v}_{i} \leq v \leq \bar{v}_{i+1}\\ 0\Leftarrow v &lt; \bar{v}_{i} \vee \bar{v}_{i+1} \leq v \end{matrix} \right.,\; \\ M_{i,j}(v)=\frac{(v-\bar{v}_{i}) \cdot M_{i,j-1}(v) }{\bar{v}_{i+j-1}-\bar{v}_{i}}+ \frac{(\bar{v}_{i+j}-v) \cdot M_{i+1,j-1}(v)}{\bar{v}_{i+j}-\bar{v}_{i+1}},\;(2 \leq j \leq m_{v}+1); \end{align} \]
</p>
<p>where <br  />
 </p><p class="formulaDsp">
\[ \bar{u}_{i}=u_{j}\; (1 \leq j \leq k_{u},\; \sum_{l=1}^{j-1}q_{l} \leq i \leq \sum_{l=1}^{j}q_{l}), \\ \bar{v}_{i}=v_{j}\; (1 \leq j \leq k_{v},\; \sum_{l=1}^{j-1}t_{l} \leq i \leq \sum_{l=1}^{j}t_{l}); \]
</p>
<p>The example record is interpreted as a B-spline surface with a u rational flag *r<sub>u</sub>*=1, v rational flag *r<sub>v</sub>*=1, u degree *m<sub>u</sub>*=1, v degree *m<sub>v</sub>*=1, u pole count *n<sub>u</sub>*=3, v pole count *n<sub>v</sub>*=2, u multiplicity knot count *k<sub>u</sub>*=5, v multiplicity knot count *k<sub>v</sub>*=4, weight poles *B<sub>1,1</sub>*=(0, 0, 1), *h<sub>1,1</sub>*=7, *B<sub>1,2</sub>*=(1, 0, -4), *h<sub>1,2</sub>*=10, *B<sub>2,1</sub>*=(0, 1, -2), *h<sub>2,1</sub>*=8, *B<sub>2,2</sub>*=(1, 1, 5), *h<sub>2,2</sub>*=11, *B<sub>3,1</sub>*=(0, 2, 3), *h<sub>3,1</sub>*=9&#160;and *B<sub>3,2</sub>*=(1, 2, 6), *h<sub>3,2</sub>*=12, u multiplicity knots *u<sub>1</sub>*=0, *q<sub>1</sub>*=1, *u<sub>2</sub>*=0.25, *q<sub>2</sub>*=1, *u<sub>3</sub>*=0.5, *q<sub>3</sub>*=1, *u<sub>4</sub>*=0.75, *q<sub>4</sub>*=1&#160;and *u<sub>5</sub>*=1, *q<sub>5</sub>*=1, v multiplicity knots *v<sub>1</sub>*=0, *r<sub>1</sub>*=1, *v<sub>2</sub>*=0.3, *r<sub>2</sub>*=1, *v<sub>3</sub>*=0.7, *r<sub>3</sub>*=1&#160;and *v<sub>4</sub>*=1, *r<sub>4</sub>*=1. The B-spline surface is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ \begin{align} S(u,v)= [ (0,0,1) \cdot 7 \cdot N_{1,2}(u) \cdot M_{1,2}(v)+(1,0,-4) \cdot 10 \cdot N_{1,2}(u) \cdot M_{2,2}(v)+ \\ (0,1,-2) \cdot 8 \cdot N_{2,2}(u) \cdot M_{1,2}(v)+(1,1,5) \cdot 11 \cdot N_{2,2}(u) \cdot M_{2,2}(v)+ \\ (0,2,3) \cdot 9 \cdot N_{3,2}(u) \cdot M_{1,2}(v)+(1,2,6) \cdot 12 \cdot N_{3,2}(u) \cdot M_{2,2}(v)] \div \\ [7 \cdot N_{1,2}(u) \cdot M_{1,2}(v)+10 \cdot N_{1,2}(u) \cdot M_{2,2}(v)+ 8 \cdot N_{2,2}(u) \cdot M_{1,2}(v)+ \\ 11 \cdot N_{2,2}(u) \cdot M_{2,2}(v)+ 9 \cdot N_{3,2}(u) \cdot M_{1,2}(v)+12 \cdot N_{3,2}(u) \cdot M_{2,2}(v) ] \end{align} \]
</p>
<h3><a class="anchor" id="specification__brep_format_5_2_10"></a>
Rectangular Trim Surface - &lt; surface  record 10 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    10 -1 2 -3 4  
    1 1 2 3 0 0 1 1 0 -0 -0 1 0   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;surface record 10&gt; = "10" &lt;_&gt; &lt;trim surface u min&gt; &lt;_&gt; &lt;trim surface u max&gt; &lt;_&gt; 
    &lt;trim surface v min&gt; &lt;_&gt; &lt;trim surface v max&gt; &lt;_\n&gt; &lt;surface record&gt;;

    &lt;trim surface u min&gt; = &lt;real&gt;;

    &lt;trim surface u max&gt; = &lt;real&gt;;

    &lt;trim surface v min&gt; = &lt;real&gt;;

    &lt;trim surface v max&gt; = &lt;real&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 10&gt; describes a rectangular trim surface. The surface data consist of reals *u<sub>min</sub>*, *u<sub>max</sub>*, *v<sub>min</sub>*&#160;and *v<sub>max</sub>*&#160;and a &lt;surface record&gt; so that *u<sub>min</sub>* &lt; *u<sub>max</sub>*&#160;and *v<sub>min</sub>* &lt; *v<sub>max</sub>*. The rectangular trim surface is a restriction of the base surface <em>B</em>&#160;described in the record to the set \( [u_{min},u_{max}] \times [v_{min},v_{max}] \subseteq domain(B) \). The rectangular trim surface is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=B(u,v),\; (u,v) \in [u_{min},u_{max}] \times [v_{min},v_{max}] . \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a rectangular trim surface to the set [-1, 2]x[-3, 4]&#160;for the base surface \( B(u,v)=(1,2,3)+u \cdot (1,0,0)+v \cdot (0,1,0) \). The rectangular trim surface is defined by the following parametric equation: \( B(u,v)=(1,2,3)+u \cdot (1,0,0)+ v \cdot (0,1,0),\; (u,v) \in [-1,2] \times [-3,4] \).</p>
<h3><a class="anchor" id="specification__brep_format_5_2_11"></a>
Offset Surface - &lt; surface record 11 &gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    11 -2  
    1 1 2 3 0 0 1 1 0 -0 -0 1 0   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;surface record 11&gt; = "11" &lt;_&gt; &lt;surface record distance&gt; &lt;_\n&gt; &lt;surface record&gt;;

    &lt;surface record distance&gt; = &lt;real&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;surface record 11&gt; describes an offset surface. <br  />
 The offset surface data consist of a distance <em>d</em>&#160;and a &lt;surface record&gt;. The offset surface is the result of offsetting the base surface <em>B</em>&#160;described in the record to the distance <em>d</em>&#160;along the normal <em>N</em>&#160;of surface <em>B</em>. The offset surface is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ S(u,v)=B(u,v)+d \cdot N(u,v),\; (u,v) \in domain(B) . \\ N(u,v) = [S&#39;_{u}(u,v),S&#39;_{v}(u,v)] \]
</p>
<p> if \( [S&#39;_{u}(u,v),S&#39;_{v}(u,v)] \neq \vec{0} \). <br  />
</p>
<p>The example record is interpreted as an offset surface with a distance <em>d</em>=-2&#160;and base surface \( B(u,v)=(1,2,3)+u \cdot (1,0,0)+v \cdot (0,1,0) \). The offset surface is defined by the following parametric equation: \( S(u,v)=(1,2,3)+u \cdot (1,0,0)+v \cdot (0,1,0)-2 \cdot (0,0,1) \). <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_5_3"></a>
2D curves</h2>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    Curve2ds 24  
    1 0 0 1 0   
    1 0 0 1 0   
    1 3 0 0 -1   
    1 0 0 0 1   
    1 0 -2 1 0   
    1 0 0 1 0   
    1 0 0 0 -1   
    1 0 0 0 1   
    1 0 0 1 0   
    1 0 1 1 0   
    1 3 0 0 -1   
    1 1 0 0 1   
    1 0 -2 1 0   
    1 0 1 1 0   
    1 0 0 0 -1   
    1 1 0 0 1   
    1 0 0 0 1   
    1 0 0 1 0   
    1 3 0 0 1   
    1 0 0 1 0   
    1 0 0 0 1   
    1 0 2 1 0   
    1 3 0 0 1   
    1 0 2 1 0   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;2D curves&gt; = &lt;2D curve header&gt; &lt;_\n&gt; &lt;2D curve records&gt;;

    &lt;2D curve header&gt; = "Curve2ds" &lt;_&gt; &lt;2D curve count&gt;;

    &lt;2D curve count&gt; = &lt;int&gt;;

    &lt;2D curve records&gt; = &lt;2D curve record&gt; ^ &lt;2D curve count&gt;;

    &lt;2D curve record&gt; =
    &lt;2D curve record 1&gt; |
    &lt;2D curve record 2&gt; |
    &lt;2D curve record 3&gt; |
    &lt;2D curve record 4&gt; |
    &lt;2D curve record 5&gt; |
    &lt;2D curve record 6&gt; |
    &lt;2D curve record 7&gt; |
    &lt;2D curve record 8&gt; |
    &lt;2D curve record 9&gt;;  
</pre><h3><a class="anchor" id="specification__brep_format_5_3_1"></a>
Line - &lt;2D curve record 1&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    1 3 0 0 -1   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;2D curve record 1&gt; = "1" &lt;_&gt; &lt;2D point&gt; &lt;_&gt; &lt;2D direction&gt; &lt;_\n&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;2D curve record 1&gt; describes a line. The line data consist of a 2D point <em>P</em>&#160;and a 2D direction <em>D</em>. The line passes through the point <em>P</em>, has the direction <em>D</em>&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+u \cdot D, \; u \in (-\infty,\; \infty). \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a line which passes through a point <em>P</em>=(3,0), has a direction <em>D</em>=(0,-1)&#160;and is defined by the following parametric equation: \( C(u)=(3,0)+ u \cdot (0,-1) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_3_2"></a>
Circle - &lt;2D curve record 2&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    2 1 2 1 0 -0 1 3  
</pre><p><b>BNF-like Definition</b></p>
<div class="fragment"><div class="line">&lt;2D curve record 2&gt; = <span class="stringliteral">&quot;2&quot;</span> &lt;_&gt; &lt;2D circle center&gt; &lt;_&gt; &lt;2D circle Dx&gt; &lt;_&gt; &lt;2D circle Dy&gt; &lt;_&gt; &lt;2D circle radius&gt; &lt;_\n&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D circle center&gt; = &lt;2D point&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D circle Dx&gt; = &lt;2D direction&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D circle Dy&gt; = &lt;2D direction&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D circle radius&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;  </div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;2D curve record 2&gt; describes a circle. The circle data consist of a 2D point <em>P</em>, orthogonal 2D directions *D<sub>x</sub>*&#160;and *D<sub>y</sub><em>&#160;and a non-negative real *r</em>. The circle has a center <em>P</em>. The circle plane is parallel to directions *D<sub>x</sub>*&#160;and *D<sub>y</sub>*. The circle has a radius <em>r</em>&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+r \cdot (cos(u) \cdot D_{x} + sin(u) \cdot D_{y}),\; u \in [0,\; 2 \cdot \pi) . \]
</p>
<p>The example record is interpreted as a circle which has a center <em>P</em>=(1,2). The circle plane is parallel to directions *D<sub>x</sub>*=(1,0)&#160;and *D<sub>y</sub>*=(0,1). The circle has a radius <em>r</em>=3&#160;and is defined by the following parametric equation: \( C(u)=(1,2)+3 \cdot (cos(u) \cdot (1,0) + sin(u) \cdot (0,1)) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_3_3"></a>
Ellipse - &lt;2D curve record 3&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    3 1 2 1 0 -0 1 4 3  
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;2D curve record 3&gt; = "3" &lt;_&gt; &lt;2D ellipse center&gt; &lt;_&gt; &lt;2D ellipse Dmaj&gt; &lt;_&gt; 
    &lt;2D ellipse Dmin&gt; &lt;_&gt; &lt;2D ellipse Rmaj&gt; &lt;_&gt; &lt;2D ellipse Rmin&gt; &lt;_\n&gt;;

    &lt;2D ellipse center&gt; = &lt;2D point&gt;;

    &lt;2D ellipse Dmaj&gt; = &lt;2D direction&gt;;

    &lt;2D ellipse Dmin&gt; = &lt;2D direction&gt;;

    &lt;2D ellipse Rmaj&gt; = &lt;real&gt;;

    &lt;2D ellipse Rmin&gt; = &lt;real&gt;; 
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;2D curve record 3&gt; describes an ellipse. The ellipse data are 2D point <em>P</em>, orthogonal 2D directions *D<sub>maj</sub>*&#160;and *D<sub>min</sub>*&#160;and non-negative reals *r<sub>maj</sub>*&#160;and *r<sub>min</sub>*&#160;that *r<sub>maj</sub>*&#160; \( \leq \) *r<sub>min</sub>*. The ellipse has a center <em>P</em>, major and minor axis directions *D<sub>maj</sub>*&#160;and *D<sub>min</sub>*, major and minor radii *r<sub>maj</sub>*&#160;and *r<sub>min</sub>*&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+r_{maj} \cdot cos(u) \cdot D_{maj}+r_{min} \cdot sin(u) \cdot D_{min},\; u \in [0,\; 2 \cdot \pi) . \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as an ellipse which has a center <em>P</em>=(1,2), major and minor axis directions *D<sub>maj</sub>*=(1,0)&#160;and *D<sub>min</sub>*=(0,1), major and minor radii *r<sub>maj</sub>*=4&#160;and *r<sub>min</sub>*=3&#160;and is defined by the following parametric equation: \( C(u)=(1,2)+4 \cdot cos(u) \cdot (1,0)+3 \cdot sin(u) \cdot (0,1) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_3_4"></a>
Parabola - &lt;2D curve record 4&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    4 1 2 1 0 -0 1 16  
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;2D curve record 4&gt; = "4" &lt;_&gt; &lt;2D parabola origin&gt; &lt;_&gt; &lt;2D parabola Dx&gt; &lt;_&gt; 
    &lt;2D parabola Dy&gt; &lt;_&gt; &lt;2D parabola focal length&gt; &lt;_\n&gt;;

    &lt;2D parabola origin&gt; = &lt;2D point&gt;;

    &lt;2D parabola Dx&gt; = &lt;2D direction&gt;;

    &lt;2D parabola Dy&gt; = &lt;2D direction&gt;;

    &lt;2D parabola focal length&gt; = &lt;real&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;2D curve record 4&gt; describes a parabola. The parabola data consist of a 2D point <em>P</em>, orthogonal 2D directions *D<sub>x</sub>*&#160;and *D<sub>y</sub><em>&#160;and a non-negative real *f</em>. The parabola coordinate system has its origin <em>P</em>&#160;and axis directions *D<sub>x</sub>*&#160;and *D<sub>y</sub>*. The parabola has a focus length <em>f</em>&#160;and is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+\frac{u^{2}}{4 \cdot f} \cdot D_{x}+u \cdot D_{y},\; u \in (-\infty,\; \infty) \Leftarrow f \neq 0;\\ C(u)=P+u \cdot D_{x},\; u \in (-\infty,\; \infty) \Leftarrow f = 0\; (degenerated\;case). \]
</p>
<p>The example record is interpreted as a parabola in plane which passes through a point <em>P</em>=(1,2)&#160;and is parallel to directions *D<sub>x</sub>*=(1,0)&#160;and *D<sub>y</sub>*=(0,1). The parabola has a focus length <em>f</em>=16&#160;and is defined by the following parametric equation: \( C(u)=(1,2)+ \frac{u^{2}}{64} \cdot (1,0)+u \cdot (0,1) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_3_5"></a>
Hyperbola - &lt;2D curve record 5&gt;</h3>
<p><b>Example</b> <br  />
</p>
<p>5 1 2 1 0 -0 1 3 4 <br  />
</p>
<p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;2D curve record 5&gt; = "5" &lt;_&gt; &lt;2D hyperbola origin&gt; &lt;_&gt; &lt;2D hyperbola Dx&gt; &lt;_&gt; 
    &lt;2D hyperbola Dy&gt; &lt;_&gt; &lt;2D hyperbola Kx&gt; &lt;_&gt; &lt;2D hyperbola Ky&gt; &lt;_\n&gt;;

    &lt;2D hyperbola origin&gt; = &lt;2D point&gt;;

    &lt;2D hyperbola Dx&gt; = &lt;2D direction&gt;;

    &lt;2D hyperbola Dy&gt; = &lt;2D direction&gt;;

    &lt;2D hyperbola Kx&gt; = &lt;real&gt;;

    &lt;2D hyperbola Ky&gt; = &lt;real&gt;;  
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;2D curve record 5&gt; describes a hyperbola. The hyperbola data consist of a 2D point <em>P</em>, orthogonal 2D directions *D<sub>x</sub>*&#160;and *D<sub>y</sub>*&#160;and non-negative reals *k<sub>x</sub>*&#160;and *k<sub>y</sub>*. The hyperbola coordinate system has origin <em>P</em>&#160;and axis directions *D<sub>x</sub>*&#160;and *D<sub>y</sub>*. The hyperbola is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=P+k_{x} \cdot cosh(u) D_{x}+k_{y} \cdot sinh(u) \cdot D_{y},\; u \in (-\infty,\; \infty). \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as a hyperbola with coordinate system which has origin <em>P</em>=(1,2)&#160;and axis directions *D<sub>x</sub>*=(1,0)&#160;and *D<sub>y</sub>*=(0,1). Other data for the hyperbola are *k<sub>x</sub>*=5&#160;and *k<sub>y</sub>*=4. The hyperbola is defined by the following parametric equation: \( C(u)=(1,2)+3 \cdot cosh(u) \cdot (1,0)+4 \cdot sinh(u) \cdot (0,1) \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_3_6"></a>
Bezier Curve - &lt;2D curve record 6&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">6 1 2 0 1  4 1 -2  5 2 3  6   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;2D curve record 6&gt; = "6" &lt;_&gt; &lt;2D Bezier rational flag&gt; &lt;_&gt; &lt;2D Bezier degree&gt; 
    &lt;2D Bezier weight poles&gt; &lt;_\n&gt;;

    &lt;2D Bezier rational flag&gt; = &lt;flag&gt;;

    &lt;2D Bezier degree&gt; = &lt;int&gt;;

    &lt;2D Bezier weight poles&gt; = (&lt;_&gt; &lt;2D Bezier weight pole&gt;) ^ (&lt;2D Bezier degree&gt; &lt;+&gt; “1”);

    &lt;2D Bezier weight pole&gt; = &lt;2D point&gt; [&lt;_&gt; &lt;real&gt;];
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;2D curve record 6&gt; describes a Bezier curve. The curve data consist of a rational flag <em>r</em>, a degree \( m \leq 25 \)&#160;and weight poles. <br  />
</p>
<p>The weight poles are <em>m</em>+1&#160;2D points *B<sub>0</sub> ... B<sub>m</sub><em>&#160;if the flag *r</em>&#160;is 0. The weight poles are <em>m</em>+1&#160;pairs *B<sub>0</sub>h<sub>0</sub> ... B<sub>m</sub>h<sub>m</sub><em>&#160;if the flag *r</em>&#160;is 1. Here *B<sub>i</sub>*&#160;is a 2D point and *h<sub>i</sub>*&#160;is a positive real \( (0\leq i\leq m) \). *h<sub>i</sub>*=1 \((0\leq i\leq m) \) if the flag <em>r</em>&#160;is 0. <br  />
</p>
<p>The Bezier curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)= \frac{\sum_{i=0}^{m} B_{i} \cdot h_{i} \cdot C_{m}^{i} \cdot u^{i} \cdot (1-u)^{m-i}}{\sum_{i=0}^{m} h_{i} \cdot C_{m}^{i} \cdot u^{i} \cdot (1-u)^{m-i}},\; u \in [0,1] \]
</p>
<p> <br  />
</p>
<p>where \( 0^{0} \equiv 1 \). <br  />
</p>
<p>The example record is interpreted as a Bezier curve with a rational flag <em>r</em>=1, a degree <em>m</em>=2&#160;and weight poles *B<sub>0</sub>*=(0,1), *h<sub>0</sub>*=4, *B<sub>1</sub>*=(1,-2), *h<sub>1</sub>*=5&#160;and *B<sub>2</sub>*=(2,3), *h<sub>2</sub>*=6. The Bezier curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)= \frac{(0,1) \cdot 4 \cdot (1-u)^{2}+(1,-2) \cdot 5 \cdot 2 \cdot u \cdot (1-u)+(2,3) \cdot 6 \cdot u^{2}}{ 4 \cdot (1-u)^{2}+5 \cdot 2 \cdot u \cdot (1-u)+6 \cdot u^{2}} . \]
</p>
<p> <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_3_7"></a>
B-spline Curve -  &lt;2D curve record 7&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">7 1 0  1 3 5  0 1  4 1 -2  5  2 3  6  
 0 1 0.25 1 0.5 1 0.75 1 1 1  
</pre><p><b>BNF-like Definition</b></p>
<div class="fragment"><div class="line">&lt;2D curve record 7&gt; = <span class="stringliteral">&quot;7&quot;</span> &lt;_&gt; &lt;2D B-spline rational <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; &lt;_&gt; <span class="stringliteral">&quot;0&quot;</span> &lt;_&gt; &lt;2D B-spline degree&gt; &lt;_&gt; &lt;2D B-spline pole <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; &lt;_&gt; &lt;2D B-spline multiplicity knot <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; &lt;2D B-spline weight poles&gt; &lt;_\n&gt; &lt;2D B-spline multiplicity knots&gt; &lt;_\n&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D B-spline rational <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D B-spline degree&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D B-spline pole <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D B-spline multiplicity knot <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D B-spline weight poles&gt; = &lt;2D B-spline weight pole&gt; ^ &lt;2D B-spline pole <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D B-spline weight pole&gt; = &lt;_&gt; &lt;2D point&gt; [&lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;];</div>
<div class="line"> </div>
<div class="line">&lt;2D B-spline multiplicity knots&gt; =</div>
<div class="line">&lt;2D B-spline multiplicity knot&gt; ^ &lt;2D B-spline multiplicity knot <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;2D B-spline multiplicity knot&gt; = &lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt; &lt;_&gt; &lt;<span class="keywordtype">int</span>&gt;;</div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;2D curve record 7&gt; describes a B-spline curve. The curve data consist of a rational flag <em>r</em>, a degree \( m \leq 25 \), a pole count \( n \geq 2 \), a multiplicity knot count <em>k</em>, weight poles and multiplicity knots. <br  />
</p>
<p>The weight poles are <em>n</em>&#160;2D points *B<sub>1</sub> ... B<sub>n</sub><em>&#160;if the flag *r</em>&#160;is 0. The weight poles are <em>n</em>&#160;pairs *B<sub>1</sub>h<sub>1</sub> ... B<sub>n</sub>h<sub>n</sub><em>&#160;if the flag *r</em>&#160;is 1. Here *B<sub>i</sub>*&#160;is a 2D point and *h<sub>i</sub>*&#160;is a positive real \( (1\leq i\leq n) \). *h<sub>i</sub>*=1 \((1\leq i\leq n) \) if the flag <em>r</em>&#160;is 0. <br  />
</p>
<p>The multiplicity knots are <em>k</em>&#160;pairs *u<sub>1</sub>q<sub>1</sub> ... u<sub>k</sub>q<sub>k</sub>*. Here *u<sub>i</sub>*&#160;is a knot with multiplicity \( q_{i} \geq 1\; (1 \leq i \leq k) \) so that <br  />
</p>
<p class="formulaDsp">
\[ u_{i} &lt; u_{i+1}\; (1 \leq i \leq k-1), \\ q_{1} \leq m+1,\; q_{k} \leq m+1,\; q_{i} \leq m\; (2 \leq i \leq k-1),\; \sum_{i=1}^{k}q_{i}=m+n+1 . \]
</p>
<p>The B-spline curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)= \frac{\sum_{i=1}^{n} B_{i} \cdot h_{i} \cdot N_{i,m+1}(u) }{\sum_{i=1}^{n} h_{i} \cdot N_{i,m+1}(u)},\; u \in [u_{1},\; u_{k}] \]
</p>
<p>where functions *N<sub>i,j</sub><em>&#160;have the following recursion definition by *j</em></p>
<p class="formulaDsp">
\[ N_{i,1}(u)=\left\{\begin{matrix} 1\Leftarrow \bar{u}_{i} \leq u \leq \bar{u}_{i+1}\\ 0\Leftarrow u &lt; \bar{u}_{i} \vee \bar{u}_{i+1} \leq u \end{matrix} \right.,\; N_{i,j}(u)=\frac{(u-\bar{u}_{i}) \cdot N_{i,j-1}(u) }{\bar{u}_{i+j-1}-\bar{u}_{i}}+ \frac{(\bar{u}_{i+j}-u) \cdot N_{i+1,j-1}(u)}{\bar{u}_{i+j}-\bar{u}_{i+1}},\;(2 \leq j \leq m+1) \]
</p>
<p>where <br  />
</p>
<p class="formulaDsp">
\[ \bar{u}_{i}=u_{j}\; (1\leq j\leq k,\; \sum_{l=1}^{j-1}q_{l}+1 \leq i \leq \sum_{l=1}^{j}q_{l}) . \]
</p>
<p>The example record is interpreted as a B-spline curve with a rational flag <em>r</em>=1, a degree <em>m</em>=1, a pole count <em>n</em>=3, a multiplicity knot count <em>k</em>=5, weight poles *B<sub>1</sub>*=(0,1), *h<sub>1</sub>*=4, *B<sub>2</sub>*=(1,-2), *h<sub>2</sub>*=5&#160;and *B<sub>3</sub>*=(2,3), *h<sub>3</sub>*=6&#160;and multiplicity knots *u<sub>1</sub>*=0, *q<sub>1</sub>*=1, *u<sub>2</sub>*=0.25, *q<sub>2</sub>*=1, *u<sub>3</sub>*=0.5, *q<sub>3</sub>*=1, *u<sub>4</sub>*=0.75, *q<sub>4</sub>*=1&#160;and *u<sub>5</sub>*=1, *q<sub>5</sub>*=1. The B-spline curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)= \frac{(0,1) \cdot 4 \cdot N_{1,2}(u)+(1,-2) \cdot 5 \cdot N_{2,2}(u)+(2,3) \cdot 6 \cdot N_{3,2}(u)}{ 4 \cdot N_{1,2}(u)+5 \cdot N_{2,2}(u)+6 \cdot N_{3,2}(u)} . \]
</p>
<h3><a class="anchor" id="specification__brep_format_5_3_8"></a>
Trimmed Curve - &lt;2D curve record 8&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    8 -4 5  
    1 1 2 1 0   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;2D curve record 8&gt; = "8" &lt;_&gt; &lt;2D trimmed curve u min&gt; &lt;_&gt; &lt;2D trimmed curve u max&gt; &lt;_\n&gt; 
    &lt;2D curve record&gt;;

    &lt;2D trimmed curve u min&gt; = &lt;real&gt;;

    &lt;2D trimmed curve u max&gt; = &lt;real&gt;;
</pre><p><b>Description</b></p>
<p>&lt;2D curve record 8&gt; describes a trimmed curve. The trimmed curve data consist of reals *u<sub>min</sub>*&#160;and *u<sub>max</sub>*&#160;and a &lt;2D curve record&gt; so that *u<sub>min</sub>*&#160;&lt; *u<sub>max</sub>*. The trimmed curve is a restriction of the base curve <em>B</em>&#160;described in the record to the segment \( [u_{min},\;u_{max}]\subseteq domain(B) \). The trimmed curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=B(u),\; u \in [u_{min},\;u_{max}] . \]
</p>
<p>The example record is interpreted as a trimmed curve with *u<sub>min</sub>*=-4, *u<sub>max</sub>*=5&#160;and base curve \( B(u)=(1,2)+u \cdot (1,0) \). The trimmed curve is defined by the following parametric equation: \( C(u)=(1,2)+u \cdot (1,0),\; u \in [-4,5] \). <br  />
</p>
<h3><a class="anchor" id="specification__brep_format_5_3_9"></a>
Offset Curve - &lt;2D curve record 9&gt;</h3>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    9 2  
    1 1 2 1 0   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">&lt;2D curve record 9&gt; = "9" &lt;_&gt; &lt;2D offset curve distance&gt; &lt;_\n&gt; &lt;2D curve record&gt;;

&lt;2D offset curve distance&gt; = &lt;real&gt;;
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;2D curve record 9&gt; describes an offset curve. The offset curve data consist of a distance <em>d</em>&#160;and a &lt;2D curve record&gt;. The offset curve is the result of offsetting the base curve <em>B</em>&#160;described in the record to the distance <em>d</em>&#160;along the vector \( (B&#39;_{Y}(u),\; -B&#39;_{X}(u)) \neq \vec{0} \)&#160;where \( B(u)=(B&#39;_{X}(u),\; B&#39;_{Y}(u)) \). The offset curve is defined by the following parametric equation: <br  />
</p>
<p class="formulaDsp">
\[ C(u)=B(u)+d \cdot (B&#39;_{Y}(u),\; -B&#39;_{X}(u)),\; u \in domain(B) . \]
</p>
<p> <br  />
</p>
<p>The example record is interpreted as an offset curve with a distance <em>d</em>=2&#160;and base curve \( B(u)=(1,2)+u \cdot (1,0) \)&#160;and is defined by the following parametric equation: \( C(u)=(1,2)+u \cdot (1,0)+2 \cdot (0,-1) \). <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_5_4"></a>
3D polygons</h2>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    Polygon3D 1  
    2 1  
    0.1  
    1 0 0 2 0 0   
    0 1   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;3D polygons&gt; = &lt;3D polygon header&gt; &lt;_\n&gt; &lt;3D polygon records&gt;;

    &lt;3D polygon header&gt; = "Polygon3D" &lt;_&gt; &lt;3D polygon record count&gt;;

    &lt;3D polygon records&gt; = &lt;3D polygon record&gt; ^ &lt;3D polygon record count&gt;;

    &lt;3D polygon record&gt; =
    &lt;3D polygon node count&gt; &lt;_&gt; &lt;3D polygon flag of parameter presence&gt; &lt;_\n&gt;
    &lt;3D polygon deflection&gt; &lt;_\n&gt;
    &lt;3D polygon nodes&gt; &lt;_\n&gt;
    [&lt;3D polygon parameters&gt; &lt;_\n&gt;];

    &lt;3D polygon node count&gt; = &lt;int&gt;;

    &lt;3D polygon flag of parameter presence&gt; = &lt;flag&gt;;

    &lt;3D polygon deflection&gt; = &lt;real&gt;;

    &lt;3D polygon nodes&gt; = (&lt;3D polygon node&gt; &lt;_&gt;) ^ &lt;3D polygon node count&gt;;

    &lt;3D polygon node&gt; = &lt;3D point&gt;;

    &lt;3D polygon u parameters&gt; = (&lt;3D polygon u parameter&gt; &lt;_&gt;) ^ &lt;3D polygon node count&gt;;

    &lt;3D polygon u parameter&gt; = &lt;real&gt;;
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;3D polygons&gt; record describes a 3D polyline <em>L</em>&#160;which approximates a 3D curve <em>C</em>. The polyline data consist of a node count \( m \geq 2 \), a parameter presence flag <em>p</em>, a deflection \( d \geq 0 \), nodes \( N_{i}\; (1\leq i \leq m) \) and parameters \( u_{i}\; (1\leq i \leq m) \). The parameters are present only if <em>p</em>=1. The polyline <em>L</em>&#160;passes through the nodes. The deflection <em>d</em>&#160;describes the deflection of polyline <em>L</em>&#160;from the curve <em>C</em>: <br  />
</p>
<p class="formulaDsp">
\[ \underset{P \in C}{max}\; \underset{Q \in L}{min}|Q-P| \leq d . \]
</p>
<p> <br  />
</p>
<p>The parameter \( u_{i}\; (1\leq i \leq m) \) is the parameter of the node *N<sub>i</sub><em>&#160;on the curve *C</em>: <br  />
</p>
<p class="formulaDsp">
\[ C(u_{i})=N_{i} . \]
</p>
<p> <br  />
</p>
<p>The example record describes a polyline from <em>m</em>=2&#160;nodes with a parameter presence flag <em>p</em>=1, a deflection <em>d</em>=0.1, nodes *N<sub>1</sub>*=(1,0,0)&#160;and *N<sub>2</sub>*=(2,0,0)&#160;and parameters *u<sub>1</sub>*=0&#160;and *u<sub>2</sub>*=1. <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_6_4"></a>
Triangulations</h2>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    Triangulations 6  
    4 2 1 0  
    0 0 0 0 0 3 0 2 3 0 2 0 0 0 3  0 3 -2 0 -2 2 4 3 2 1 4   
    4 2 1 0  
    0 0 0 1 0 0 1 0 3 0 0 3 0 0 0  1 3 1 3 0 3 2 1 3 1 4   
    4 2 1 0  
    0 0 3 0 2 3 1 2 3 1 0 3 0 0 0  2 1 2 1 0 3 2 1 3 1 4   
    4 2 1 0  
    0 2 0 1 2 0 1 2 3 0 2 3 0 0 0  1 3 1 3 0 3 2 1 3 1 4   
    4 2 1 0  
    0 0 0 0 2 0 1 2 0 1 0 0 0 0 0  2 1 2 1 0 3 2 1 3 1 4   
    4 2 1 0  
    1 0 0 1 0 3 1 2 3 1 2 0 0 0 3  0 3 -2 0 -2 2 4 3 2 1 4   
</pre><p><b>BNF-like Definition</b></p>
<div class="fragment"><div class="line">&lt;triangulations&gt; = &lt;triangulation header&gt; &lt;_\n&gt; &lt;triangulation records&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation header&gt; = <span class="stringliteral">&quot;Triangulations&quot;</span> &lt;_&gt; &lt;triangulation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation records&gt; = &lt;triangulation record&gt; ^ &lt;triangulation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation record&gt; = &lt;triangulation node <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; &lt;_&gt; &lt;triangulation triangle <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; &lt;_&gt; &lt;triangulation parameter presence <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; [&lt;_&gt; &lt;need to <a class="codeRef" href="../../refman/html/_std_object__gp___axes_8hxx.html#af18fe2ad7a5e24f5c4e06414d1815e21">write</a> normals <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;] &lt;_&gt; &lt;triangulation deflection&gt; &lt;_\n&gt;</div>
<div class="line">&lt;triangulation nodes&gt; [&lt;_&gt; &lt;triangulation u <a class="codeRef" href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a> parameters&gt;] &lt;_&gt; &lt;triangulation triangles&gt; [&lt;_&gt; &lt;triangulation normals&gt;] &lt;_\n&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation node <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation triangle <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; = &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation parameter presence <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;need to <a class="codeRef" href="../../refman/html/_std_object__gp___axes_8hxx.html#af18fe2ad7a5e24f5c4e06414d1815e21">write</a> normals <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation deflection&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation nodes&gt; = (&lt;triangulation node&gt; &lt;_&gt;) ^ &lt;triangulation node <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation node&gt; = &lt;3D point&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation u <a class="codeRef" href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a> parameters&gt; =    </div>
<div class="line">(&lt;triangulation u <a class="codeRef" href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a> parameter pair&gt; &lt;_&gt;) ^ &lt;triangulation node <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation u <a class="codeRef" href="../../refman/html/namespaceopencascade.html#afebb5dc277cef37d6dc94421db317ebb">v</a> parameter pair&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt; &lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation triangles&gt; = (&lt;triangulation triangle&gt; &lt;_&gt;) ^ &lt;triangulation triangle <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation triangle&gt; = &lt;<span class="keywordtype">int</span>&gt; &lt;_&gt; &lt;<span class="keywordtype">int</span>&gt; &lt;_&gt; &lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation normals&gt; = (&lt;triangulation normal&gt; &lt;_&gt;) ^ &lt;triangulation node <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6f6ea6031c668433cc08c296d2755a20">count</a>&gt; ^ 3;</div>
<div class="line"> </div>
<div class="line">&lt;triangulation normal&gt; = &lt;<span class="keywordtype">short</span> <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;.</div>
<div class="ttc" id="a_std_object__gp___axes_8hxx_html_af18fe2ad7a5e24f5c4e06414d1815e21"><div class="ttname"><a href="../../refman/html/_std_object__gp___axes_8hxx.html#af18fe2ad7a5e24f5c4e06414d1815e21">write</a></div><div class="ttdeci">StdObjMgt_WriteData &amp; write(StdObjMgt_WriteData &amp;theWriteData, const gp_Ax2d &amp;theAx)</div></div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;triangulation u v parameters&gt; are used in version 2 or later. &lt;need to write normals flag&gt; and &lt;triangulation normals&gt; are used in version 3.</p>
<p>&lt;triangulation record&gt; describes a triangulation <em>T</em>&#160;which approximates a surface <em>S</em>. The triangulation data consist of a node count \( m \geq 3 \), a triangle count \( k \geq 1 \), a parameter presence flag <em>p</em>, a deflection \( d \geq 0 \), nodes \( N_{i}\; (1\leq i \leq m) \), parameter pairs \( u_{i}\; v_{i}\; (1\leq i \leq m) \), triangles \( n_{j,1}\; n_{j,2}\; n_{j,3}\; (1\leq j \leq k,\; n_{j,l} \in \left \{1,...,m \right \}\; (1\leq l\leq 3)) \). The parameters are present only if <em>p</em>=1. The deflection describes the triangulation deflection from the surface: <br  />
</p>
<p class="formulaDsp">
\[ \underset{P \in S}{max}\; \underset{Q \in T}{min}|Q-P| \leq d . \]
</p>
<p> <br  />
</p>
<p>The parameter pair \( u_{i}\; v_{i}\; (1\leq i \leq m) \) describes the parameters of node *N<sub>i</sub>*&#160;on the surface: <br  />
</p>
<p class="formulaDsp">
\[ S(u_{i},v_{i})=N_{i} . \]
</p>
<p> <br  />
</p>
<p>The triangle \( n_{j,1}\; n_{j,2}\; n_{j,3}\; (1\leq j \leq k) \) is interpreted as a triangle of nodes \( N_{n_{j},1}\; N_{n_{j},2}\) and \( N_{n_{j},3} \)&#160;with circular traversal of the nodes in the order \( N_{n_{j},1}\; N_{n_{j},2}\) and \( N_{n_{j},3} \). From any side of the triangulation <em>T</em>&#160;all its triangles have the same direction of the node circular traversal: either clockwise or counterclockwise. <br  />
</p>
<p>Triangulation record <br  />
</p>
<pre class="fragment">    4 2 1 0  
    0 0 0 0 0 3 0 2 3 0 2 0 0 0 3  0 3 -2 0 -2 2 4 3 2 1 4   
</pre><p>describes a triangulation with <em>m</em>=4&#160;nodes, <em>k</em>=2&#160;triangles, parameter presence flag <em>p</em>=1, deflection <em>d</em>=0, nodes *N<sub>1</sub>*=(0,0,0), *N<sub>2</sub>*=(0,0,3), *N<sub>3</sub>*=(0,2,3) and *N<sub>4</sub>*=(0,2,0), parameters (*u<sub>1</sub>*, *v<sub>1</sub>*)=(0,0), (*u<sub>2</sub>*, *v<sub>2</sub>*)=(3,0), (*u<sub>3</sub>*, *v<sub>3</sub>*)=(3,-2)&#160;and (*u<sub>4</sub>*, *v<sub>4</sub>*)=(0,-2), and triangles (*n<sub>1,1</sub>*, *n<sub>1,2</sub>*, *n<sub>1,3</sub>*)=(2,4,3)&#160;and (*n<sub>2,1</sub>*, *n<sub>2,2</sub>*, *n<sub>2,3</sub>*)=(2,1,4). From the point (1,0,0) ((-1,0,0)) the triangles have clockwise (counterclockwise) direction of the node circular traversal. <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_6_5"></a>
Polygons on triangulations</h2>
<p><b>Example</b> <br  />
</p>
<pre class="fragment">    PolygonOnTriangulations 24  
    2 1 2   
    p 0.1 1 0 3   
    2 1 4   
    p 0.1 1 0 3   
    2 2 3   
    p 0.1 1 0 2   
    2 1 2   
    p 0.1 1 0 2   
    2 4 3   
    p 0.1 1 0 3   
    2 1 4   
    p 0.1 1 0 3   
    2 1 4   
    p 0.1 1 0 2   
    2 1 2   
    p 0.1 1 0 2   
    2 1 2   
    p 0.1 1 0 3   
    2 2 3   
    p 0.1 1 0 3   
    2 2 3   
    p 0.1 1 0 2   
    2 4 3   
    p 0.1 1 0 2   
    2 4 3   
    p 0.1 1 0 3   
    2 2 3   
    p 0.1 1 0 3   
    2 1 4   
    p 0.1 1 0 2   
    2 4 3   
    p 0.1 1 0 2   
    2 1 2   
    p 0.1 1 0 1   
    2 1 4   
    p 0.1 1 0 1   
    2 4 3   
    p 0.1 1 0 1   
    2 1 4   
    p 0.1 1 0 1   
    2 1 2   
    p 0.1 1 0 1   
    2 2 3   
    p 0.1 1 0 1   
    2 4 3   
    p 0.1 1 0 1   
    2 2 3   
    p 0.1 1 0 1   
</pre><p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;polygons on triangulations&gt; = &lt;polygons on triangulations header&gt; &lt;_\n&gt;
    &lt;polygons on triangulations records&gt;;

    &lt;polygons on triangulations header&gt; =
    "PolygonOnTriangulations" &lt;_&gt; &lt;polygons on triangulations record count&gt;;

    &lt;polygons on triangulations record count&gt; = &lt;int&gt;;

    &lt;polygons on triangulations records&gt; =
    &lt;polygons on triangulations record&gt; ^ &lt;polygons on triangulations record count&gt;;

    &lt;polygons on triangulations record&gt; =
    &lt;polygons on triangulations node count&gt; &lt;_&gt; &lt;polygons on triangulations node numbers&gt; &lt;_\n&gt;
    "p" &lt;_&gt; &lt;polygons on triangulations deflection&gt; &lt;_&gt;
    &lt;polygons on triangulations parameter presence flag&gt;
    [&lt;_&gt; &lt;polygons on triangulations u parameters&gt;] &lt;_\n&gt;;

    &lt;polygons on triangulations node count&gt; = &lt;int&gt;;

    &lt;polygons on triangulations node numbers&gt; =
    &lt;polygons on triangulations node number&gt; ^ &lt;polygons on triangulations node count&gt;;

    &lt;polygons on triangulations node number&gt; = &lt;int&gt;;

    &lt;polygons on triangulations deflection&gt; = &lt;real&gt;;

    &lt;polygons on triangulations parameter presence flag&gt; = &lt;flag&gt;;

    &lt;polygons on triangulations u parameters&gt; =
    (&lt;polygons on triangulations u parameter&gt; &lt;_&gt;) ^ &lt;polygons on triangulations node count&gt;;

    &lt;polygons on triangulations u parameter&gt; = &lt;real&gt;;
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;polygons on triangulations&gt; describes a polyline <em>L</em>&#160;on a triangulation which approximates a curve <em>C</em>. The polyline data consist of a node count \( m \geq 2 \), node numbers \( n_{i} \geq 1 \), deflection \( d \geq 0 \), a parameter presence flag <em>p</em>&#160;and parameters \( u_{i}\; (1\leq i\leq m) \). The parameters are present only if <em>p</em>=1. The deflection <em>d</em>&#160;describes the deflection of polyline <em>L</em>&#160;from the curve <em>C</em>: <br  />
</p>
<p class="formulaDsp">
\[ \underset{P \in C}{max}\; \underset{Q \in L}{min}|Q-P| \leq d . \]
</p>
<p> <br  />
</p>
<p>Parameter \( u_{i}\; (1\leq i\leq m) \) is *n<sub>i</sub>*-th node *C(u<sub>i</sub>)*&#160;parameter on curve <em>C</em>. <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_6_6"></a>
Geometric Sense of a Curve</h2>
<p>Geometric sense of curve <em>C</em>&#160;described above is determined by the direction of parameter <em>u</em>&#160;increasing. <br  />
</p>
<h1><a class="anchor" id="specification__brep_format_7"></a>
Shapes</h1>
<p>An example of section shapes and a whole *.brep file are given in chapter 7 <a class="el" href="specification__brep_format.html#specification__brep_format_8">Appendix</a>. <br  />
</p>
<p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;shapes&gt; = &lt;shape header&gt; &lt;_\n&gt; &lt;shape records&gt; &lt;_\n&gt; &lt;shape final record&gt;;

    &lt;shape header&gt; = "TShapes" &lt;_&gt; &lt;shape count&gt;;

    &lt;shape count&gt; = &lt;int&gt;;

    &lt;shape records&gt; = &lt;shape record&gt; ^ &lt;shape count&gt;;

    &lt;shape record&gt; = &lt;shape subrecord&gt; &lt;_\n&gt; &lt;shape flag word&gt; &lt;_\n&gt; &lt;shape subshapes&gt; &lt;_\n&gt;;

    &lt;shape flag word&gt; = &lt;flag&gt; ^ 7;

    &lt;shape subshapes&gt; = (&lt;shape subshape&gt; &lt;_&gt;)* "*";

    &lt;shape subshape&gt; =
    &lt;shape subshape orientation&gt; &lt;shape subshape number&gt; &lt;_&gt; &lt;shape location number&gt;;

    &lt;shape subshape orientation&gt; = "+" | "-" | "i" | "e";

    &lt;shape subshape number&gt; = &lt;int&gt;;

    &lt;shape location number&gt; = &lt;int&gt;;

    &lt;shape final record&gt; = &lt;shape subshape&gt;;

    &lt;shape subrecord&gt; =
    ("Ve" &lt;_\n&gt; &lt;vertex data&gt; &lt;_\n&gt;) |
    ("Ed" &lt;_\n&gt; &lt;edge data&gt; &lt;_\n&gt;) |
    ("Wi" &lt;_\n&gt; &lt;_\n&gt;) |
    ("Fa" &lt;_\n&gt; &lt;face data&gt;) |
    ("Sh" &lt;_\n&gt; &lt;_\n&gt;) |
    ("So" &lt;_\n&gt; &lt;_\n&gt;) |
    ("CS" &lt;_\n&gt; &lt;_\n&gt;) |
    ("Co" &lt;_\n&gt; &lt;_\n&gt;);
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;shape flag word&gt; \( f_{1}\; f_{2}\; f_{3}\; f_{4}\; f_{5}\; f_{6}\; f_{7} \)&#160;&lt;flag&gt;s \( f_{i}\;(1\leq i \leq 7) \)&#160;are interpreted as shape flags in the following way: <br  />
</p>
<ul>
<li>\( f_{1} \)&#160;&ndash; free; <br  />
</li>
<li>\( f_{2} \)&#160;&ndash; modified; <br  />
</li>
<li>\( f_{3} \)&#160;&ndash; IGNORED(version 1 only) \ checked (version 2 or later); <br  />
</li>
<li>\( f_{4} \)&#160;&ndash; orientable; <br  />
</li>
<li>\( f_{5} \)&#160;&ndash; closed; <br  />
</li>
<li>\( f_{6} \)&#160;&ndash; infinite; <br  />
</li>
<li>\( f_{7} \)&#160;&ndash; convex. <br  />
</li>
</ul>
<p>The flags are used in a special way [1]. <br  />
</p>
<p>&lt;shape subshape orientation&gt; is interpreted in the following way: <br  />
</p>
<ul>
<li>+ &ndash; forward; <br  />
</li>
<li>- &ndash; reversed; <br  />
</li>
<li>i &ndash; internal; <br  />
</li>
<li>e &ndash; external. <br  />
</li>
</ul>
<p>&lt;shape subshape orientation&gt; is used in a special way [1]. <br  />
</p>
<p>&lt;shape subshape number&gt; is the number of a &lt;shape record&gt; which is located in this section above the &lt;shape subshape number&gt;. &lt;shape record&gt; numbering is backward and starts from 1. <br  />
</p>
<p>&lt;shape subrecord&gt; types are interpreted in the following way:</p>
<ul>
<li>"Ve" &ndash; vertex; <br  />
</li>
<li>"Ed" &ndash; edge; <br  />
</li>
<li>"Wi" &ndash; wire; <br  />
</li>
<li>"Fa" &ndash; face; <br  />
</li>
<li>"Sh" &ndash; shell; <br  />
</li>
<li>"So" &ndash; solid; <br  />
</li>
<li>"CS" &ndash; compsolid; <br  />
</li>
<li>"Co" &ndash; compound. <br  />
</li>
</ul>
<p>&lt;shape final record&gt; determines the orientation and location for the whole model. <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_7_1"></a>
Common Terms</h2>
<p>The terms below are used by &lt;vertex data&gt;, &lt;edge data&gt; and &lt;face data&gt;. <br  />
</p>
<p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;location number&gt; = &lt;int&gt;;

    &lt;3D curve number&gt; = &lt;int&gt;;

    &lt;surface number&gt; = &lt;int&gt;;

    &lt;2D curve number&gt; = &lt;int&gt;;

    &lt;3D polygon number&gt; = &lt;int&gt;;

    &lt;triangulation number&gt; = &lt;int&gt;;

    &lt;polygon on triangulation number&gt; = &lt;int&gt;;

    &lt;curve parameter minimal and maximal values&gt; = &lt;real&gt; &lt;_&gt; &lt;real&gt;;

    &lt;curve values for parameter minimal and maximal values&gt; =
    real&gt; &lt;_&gt; &lt;real&gt; &lt;_&gt; &lt;real&gt; &lt;_&gt; &lt;real&gt;;
</pre><p><b>Description</b> <br  />
</p>
<p>&lt;location number&gt; is the number of &lt;location record&gt; from section locations. &lt;location record&gt; numbering starts from 1. &lt;location number&gt; 0 is interpreted as the identity location. <br  />
</p>
<p>&lt;3D curve number&gt; is the number of a &lt;3D curve record&gt; from subsection &lt;3D curves&gt; of section &lt;geometry&gt;. &lt;3D curve record&gt; numbering starts from 1. <br  />
</p>
<p>&lt;surface number&gt; is the number of a &lt;surface record&gt; from subsection &lt;surfaces&gt; of section &lt;geometry&gt;. &lt;surface record&gt; numbering starts from 1. <br  />
</p>
<p>&lt;2D curve number&gt; is the number of a &lt;2D curve record&gt; from subsection &lt;2D curves&gt; of section &lt;geometry&gt;. &lt;2D curve record&gt; numbering starts from 1. <br  />
</p>
<p>&lt;3D polygon number&gt; is the number of a &lt;3D polygon record&gt; from subsection &lt;3D polygons&gt; of section &lt;geometry&gt;. &lt;3D polygon record&gt; numbering starts from 1. <br  />
</p>
<p>&lt;triangulation number&gt; is the number of a &lt;triangulation record&gt; from subsection &lt;triangulations&gt; of section &lt;geometry&gt;. &lt;triangulation record&gt; numbering starts from 1. <br  />
</p>
<p>&lt;polygon on triangulation&gt; number is the number of a &lt;polygons on triangulations record&gt; from subsection &lt;polygons on triangulations&gt; of section &lt;geometry&gt;. <br  />
 &lt;polygons on triangulations record&gt; numbering starts from 1. <br  />
</p>
<p>&lt;curve parameter minimal and maximal values&gt; *u<sub>min</sub>*&#160;and *u<sub>max</sub><em>&#160;are the curve parameter *u</em> bounds: *u<sub>min</sub>* \( \leq \) <em>u</em> \( \leq \) *u<sub>max</sub>*. <br  />
</p>
<p>&lt;curve values for parameter minimal and maximal values&gt; *u<sub>min</sub>*&#160;and *u<sub>max</sub>*&#160;are real pairs *x<sub>min</sub> y<sub>min</sub>*&#160;and *x<sub>max</sub> y<sub>max</sub>*&#160;that (*x<sub>min</sub>*, *y<sub>min</sub>*)= <em>C</em> (*u<sub>min</sub>*)&#160;and (*x<sub>max</sub>*, *y<sub>max</sub>*)= <em>C</em> (*u<sub>max</sub>*)&#160;where <em>C</em>&#160;is a parametric equation of the curve. <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_7_2"></a>
Vertex data</h2>
<p><b>BNF-like Definition</b></p>
<pre class="fragment">    &lt;vertex data&gt; = &lt;vertex data tolerance&gt; &lt;_\n&gt; &lt;vertex data 3D representation&gt; &lt;_\n&gt; 
    &lt;vertex data representations&gt;;

    &lt;vertex data tolerance&gt; = &lt;real&gt;;

    &lt;vertex data 3D representation&gt; = &lt;3D point&gt;;

    &lt;vertex data representations&gt; = (&lt;vertex data representation&gt; &lt;_\n&gt;)* "0 0";

    &lt;vertex data representation&gt; = &lt;vertex data representation u parameter&gt; &lt;_&gt;
    &lt;vertex data representation data&gt; &lt;_&gt; &lt;location number&gt;;

    &lt;vertex data representation u parameter&gt; = &lt;real&gt;;

    &lt;vertex data representation data&gt; =
    ("1" &lt;_&gt; &lt;vertex data representation data 1&gt;) |
    ("2" &lt;_&gt; &lt;vertex data representation data 2&gt;) |
    ("3" &lt;_&gt; &lt;vertex data representation data 3&gt;);

    &lt;vertex data representation data 1&gt; = &lt;3D curve number&gt;;

    &lt;vertex data representation data 2&gt; = &lt;2D curve number&gt; &lt;_&gt; &lt;surface number&gt;;

    &lt;vertex data representation data 3&gt; =
    &lt;vertex data representation v parameter&gt; &lt;_&gt; &lt;surface number&gt;;

    &lt;vertex data representation v parameter&gt; = &lt;real&gt;;
</pre><p><b>Description</b> <br  />
</p>
<p>The usage of &lt;vertex data representation u parameter&gt; <em>U</em>&#160;is described below. <br  />
</p>
<p>&lt;vertex data representation data 1&gt; and parameter <em>U</em>&#160;describe the position of the vertex <em>V</em>&#160;on a 3D curve <em>C</em>. Parameter <em>U</em>&#160;is a parameter of the vertex <em>V</em>&#160;on the curve <em>C</em>: <em>C(u)=V</em>. <br  />
</p>
<p>&lt;vertex data representation data 2&gt; and parameter <em>U</em>&#160;describe the position of the vertex <em>V</em>&#160;on a 2D curve <em>C</em>&#160;which is located on a surface. Parameter <em>U</em>&#160;is a parameter of the vertex <em>V</em>&#160;on the curve <em>C</em>: <em>C(u)=V</em>. <br  />
</p>
<p>&lt;vertex data representation data 3&gt; and parameter <em>u</em>&#160;describe the position of the vertex <em>V</em>&#160;on a surface <em>S</em>&#160;through &lt;vertex data representation v parameter&gt; <em>v</em>: <em>S(u,v)=V</em>. <br  />
</p>
<p>&lt;vertex data tolerance&gt; <em>t</em>&#160;describes the maximum distance from the vertex <em>V</em>&#160;to the set <em>R</em> of vertex <em>V</em>&#160;representations: <br  />
</p>
<p class="formulaDsp">
\[ \underset{P \in R }{max} |P-V| \leq t . \]
</p>
<p> <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_7_3"></a>
Edge data</h2>
<p><b>BNF-like Definition</b></p>
<div class="fragment"><div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a>&gt; = &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> tolerance&gt; &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> same parameter <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; &lt;_&gt; edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> same range <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> degenerated <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; &lt;_\n&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representations&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> tolerance&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> same parameter <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> same range <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> degenerated <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representations&gt; = (&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation&gt; &lt;_\n&gt;)* <span class="stringliteral">&quot;0&quot;</span>;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation&gt; =</div>
<div class="line"><span class="stringliteral">&quot;1&quot;</span> &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 1&gt;</div>
<div class="line"><span class="stringliteral">&quot;2&quot;</span> &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 2&gt;</div>
<div class="line"><span class="stringliteral">&quot;3&quot;</span> &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 3&gt;</div>
<div class="line"><span class="stringliteral">&quot;4&quot;</span> &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 4&gt;</div>
<div class="line"><span class="stringliteral">&quot;5&quot;</span> &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 5&gt;</div>
<div class="line"><span class="stringliteral">&quot;6&quot;</span> &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 6&gt;</div>
<div class="line"><span class="stringliteral">&quot;7&quot;</span> &lt;_&gt; &lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 7&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 1&gt; = &lt;3D curve number&gt; &lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/namespaceopencascade.html#abd5859736a7324962ee0d8a1db70657c">location</a> number&gt; &lt;_&gt;</div>
<div class="line">&lt;curve parameter minimal and maximal <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a09108864acf27aa326870bebc477d989">values</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 2&gt; = &lt;2D curve number&gt; &lt;_&gt; &lt;surface number&gt; &lt;_&gt; </div>
<div class="line">&lt;<a class="codeRef" href="../../refman/html/namespaceopencascade.html#abd5859736a7324962ee0d8a1db70657c">location</a> number&gt; &lt;_&gt; &lt;curve parameter minimal and maximal <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a09108864acf27aa326870bebc477d989">values</a>&gt;</div>
<div class="line">[&lt;_\n&gt; &lt;curve <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a09108864acf27aa326870bebc477d989">values</a> <span class="keywordflow">for</span> parameter minimal and maximal <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a09108864acf27aa326870bebc477d989">values</a>&gt;];</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 3&gt; = (&lt;2D curve number&gt; &lt;_&gt;) ^ 2 &lt;continuity order&gt; &lt;_&gt; &lt;surface number&gt; &lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/namespaceopencascade.html#abd5859736a7324962ee0d8a1db70657c">location</a> number&gt; &lt;_&gt; &lt;curve parameter minimal and maximal <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a09108864acf27aa326870bebc477d989">values</a>&gt; &lt;\n&gt; &lt;curve <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a09108864acf27aa326870bebc477d989">values</a> <span class="keywordflow">for</span> parameter minimal and maximal <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a09108864acf27aa326870bebc477d989">values</a>&gt;];</div>
<div class="line"> </div>
<div class="line">&lt;continuity order&gt; = <span class="stringliteral">&quot;C0&quot;</span> | <span class="stringliteral">&quot;C1&quot;</span> | <span class="stringliteral">&quot;C2&quot;</span> | <span class="stringliteral">&quot;C3&quot;</span> | <span class="stringliteral">&quot;CN&quot;</span> | <span class="stringliteral">&quot;G1&quot;</span> | <span class="stringliteral">&quot;G2&quot;</span>.</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 4&gt; =</div>
<div class="line">&lt;continuity order&gt; (&lt;_&gt; &lt;surface number&gt; &lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/namespaceopencascade.html#abd5859736a7324962ee0d8a1db70657c">location</a> number&gt;) ^ 2;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 5&gt; = &lt;3D polygon number&gt; &lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/namespaceopencascade.html#abd5859736a7324962ee0d8a1db70657c">location</a> number&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 6&gt; =</div>
<div class="line">&lt;polygon on triangulation number&gt; &lt;_&gt; &lt;triangulation number&gt; &lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/namespaceopencascade.html#abd5859736a7324962ee0d8a1db70657c">location</a> number&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;edge <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> representation <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> 7&gt; = (&lt;polygon on triangulation number&gt; &lt;_&gt;) ^ 2 </div>
<div class="line">&lt;triangulation number&gt; &lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/namespaceopencascade.html#abd5859736a7324962ee0d8a1db70657c">location</a> number&gt;;</div>
<div class="ttc" id="anamespaceopencascade_html_a09108864acf27aa326870bebc477d989"><div class="ttname"><a href="../../refman/html/namespaceopencascade.html#a09108864acf27aa326870bebc477d989">values</a></div><div class="ttdeci">GLenum GLsizei GLsizei GLint * values</div></div>
<div class="ttc" id="anamespaceopencascade_html_a6d2ac61093c47ffeaf4a21cac0c0f9b0"><div class="ttname"><a href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a></div><div class="ttdeci">GLint GLenum GLsizei GLsizei GLsizei GLint GLsizei const void * data</div></div>
<div class="ttc" id="anamespaceopencascade_html_abd5859736a7324962ee0d8a1db70657c"><div class="ttname"><a href="../../refman/html/namespaceopencascade.html#abd5859736a7324962ee0d8a1db70657c">location</a></div><div class="ttdeci">GLint location</div></div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>Flags &lt;edge data same parameter flag&gt;, &lt;edge data same range flag&gt; and &lt;edge data degenerated flag&gt; are used in a special way [1]. <br  />
</p>
<p>&lt;edge data representation data 1&gt; describes a 3D curve. <br  />
</p>
<p>&lt;edge data representation data 2&gt; describes a 2D curve on a surface. <br  />
 &lt;curve values for parameter minimal and maximal values&gt; are used in version 2 or later. <br  />
</p>
<p>&lt;edge data representation data 3&gt; describes a 2D curve on a closed surface. <br  />
 &lt;curve values for parameter minimal and maximal values&gt; are used in version 2 or later. <br  />
</p>
<p>&lt;edge data representation data 5&gt; describes a 3D polyline. <br  />
</p>
<p>&lt;edge data representation data 6&gt; describes a polyline on a triangulation. <br  />
</p>
<p>&lt;edge data tolerance&gt; <em>t</em>&#160;describes the maximum distance from the edge <em>E</em> to the set <em>R</em>&#160;of edge <em>E</em>&#160;representations: <br  />
</p>
<p class="formulaDsp">
\[ \underset{C \in R}{max}\;\underset{P \in E}{max}\;\underset{Q \in C}{min}|Q-P| \leq t \]
</p>
<p> <br  />
</p>
<h2><a class="anchor" id="specification__brep_format_7_4"></a>
Face data</h2>
<p><b>BNF-like Definition</b></p>
<div class="fragment"><div class="line">&lt;face <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a>&gt; = &lt;face <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> natural restriction <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; &lt;_&gt; &lt;face <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> tolerance&gt; &lt;_&gt; &lt;surface number&gt; &lt;_&gt; &lt;<a class="codeRef" href="../../refman/html/namespaceopencascade.html#abd5859736a7324962ee0d8a1db70657c">location</a> number&gt; &lt;\n&gt; [<span class="stringliteral">&quot;2&quot;</span> &lt;_&gt; &lt;triangulation number&gt;];</div>
<div class="line"> </div>
<div class="line">&lt;face <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> natural restriction <a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>&gt;;</div>
<div class="line"> </div>
<div class="line">&lt;face <a class="codeRef" href="../../refman/html/namespaceopencascade.html#a6d2ac61093c47ffeaf4a21cac0c0f9b0">data</a> tolerance&gt; = &lt;<a class="codeRef" href="../../refman/html/_adv_app2_var___data__f2c_8hxx.html#a031f8951175b43076c2084a6c2173410">real</a>&gt;;</div>
</div><!-- fragment --><p><b>Description</b> <br  />
</p>
<p>&lt;face data&gt; describes a surface <em>S</em>&#160;of face <em>F</em>&#160;and a triangulation <em>T</em>&#160;of face <em>F</em>. The surface <em>S</em>&#160;may be empty: &lt;surface number&gt; = 0. <br  />
</p>
<p>&lt;face data tolerance&gt; <em>t</em>&#160;describes the maximum distance from the face <em>F</em>&#160;to the surface <em>S</em>: <br  />
</p>
<p class="formulaDsp">
\[ \underset{P \in F}{max}\;\underset{Q \in S}{min}|Q-P| \leq t \]
</p>
<p>Flag &lt;face data natural restriction flag&gt; is used in a special way [1]. <br  />
</p>
<h1><a class="anchor" id="specification__brep_format_8"></a>
Appendix</h1>
<p>This chapter contains a *.brep file example. <br  />
</p>
<pre class="fragment">    DBRep_DrawableShape  
     
    CASCADE Topology V1, (c)  Matra-Datavision  
    Locations 3  
    1  
                  0                0               1               0   
                  1                0               0               0   
                  0                1               0               0   
    1  
                  1                0               0               4   
                  0                1               0               5   
                  0                0               1               6   
    2  1 1 2 1 0  
    Curve2ds 24  
    1 0 0 1 0   
    1 0 0 1 0   
    1 3 0 0 -1   
    1 0 0 0 1   
    1 0 -2 1 0   
    1 0 0 1 0   
    1 0 0 0 -1   
    1 0 0 0 1   
    1 0 0 1 0   
    1 0 1 1 0   
    1 3 0 0 -1   
    1 1 0 0 1   
    1 0 -2 1 0   
    1 0 1 1 0   
    1 0 0 0 -1   
    1 1 0 0 1   
    1 0 0 0 1   
    1 0 0 1 0   
    1 3 0 0 1   
    1 0 0 1 0   
    1 0 0 0 1   
    1 0 2 1 0   
    1 3 0 0 1   
    1 0 2 1 0   
    Curves 13  
    1 0 0 0 0 0 1   
    1 0 0 3 -0 1 0   
    1 0 2 0 0 0 1   
    1 0 0 0 -0 1 0   
    1 1 0 0 0 0 1   
    1 1 0 3 0 1 0   
    1 1 2 0 0 0 1   
    1 1 0 0 -0 1 0   
    1 0 0 0 1 0 -0   
    1 0 0 3 1 0 -0   
    1 0 2 0 1 0 -0   
    1 0 2 3 1 0 -0   
    1 1 0 0 1 0 0   
    Polygon3D 1  
    2 1  
    0.1  
    1 0 0 2 0 0   
    0 1   
    PolygonOnTriangulations 24  
    2 1 2   
    p 0.1 1 0 3   
    2 1 4   
    p 0.1 1 0 3   
    2 2 3   
    p 0.1 1 0 2   
    2 1 2   
    p 0.1 1 0 2   
    2 4 3   
    p 0.1 1 0 3   
    2 1 4   
    p 0.1 1 0 3   
    2 1 4   
    p 0.1 1 0 2   
    2 1 2   
    p 0.1 1 0 2   
    2 1 2   
    p 0.1 1 0 3   
    2 2 3   
    p 0.1 1 0 3   
    2 2 3   
    p 0.1 1 0 2   
    2 4 3   
    p 0.1 1 0 2   
    2 4 3   
    p 0.1 1 0 3   
    2 2 3   
    p 0.1 1 0 3   
    2 1 4   
    p 0.1 1 0 2   
    2 4 3   
    p 0.1 1 0 2   
    2 1 2   
    p 0.1 1 0 1   
    2 1 4   
    p 0.1 1 0 1   
    2 4 3   
    p 0.1 1 0 1   
    2 1 4   
    p 0.1 1 0 1   
    2 1 2   
    p 0.1 1 0 1   
    2 2 3   
    p 0.1 1 0 1   
    2 4 3   
    p 0.1 1 0 1   
    2 2 3   
    p 0.1 1 0 1   
    Surfaces 6  
    1 0 0 0 1 0 -0 0 0 1 0 -1 0   
    1 0 0 0 -0 1 0 0 0 1 1 0 -0   
    1 0 0 3 0 0 1 1 0 -0 -0 1 0   
    1 0 2 0 -0 1 0 0 0 1 1 0 -0   
    1 0 0 0 0 0 1 1 0 -0 -0 1 0   
    1 1 0 0 1 0 -0 0 0 1 0 -1 0   
    Triangulations 6  
    4 2 1 0  
    0 0 0 0 0 3 0 2 3 0 2 0 0 0 3  0 3 -2 0 -2 2 4 3 2 1 4   
    4 2 1 0  
    0 0 0 1 0 0 1 0 3 0 0 3 0 0 0  1 3 1 3 0 3 2 1 3 1 4   
    4 2 1 0  
    0 0 3 0 2 3 1 2 3 1 0 3 0 0 0  2 1 2 1 0 3 2 1 3 1 4   
    4 2 1 0  
    0 2 0 1 2 0 1 2 3 0 2 3 0 0 0  1 3 1 3 0 3 2 1 3 1 4   
    4 2 1 0  
    0 0 0 0 2 0 1 2 0 1 0 0 0 0 0  2 1 2 1 0 3 2 1 3 1 4   
    4 2 1 0  
    1 0 0 1 0 3 1 2 3 1 2 0 0 0 3  0 3 -2 0 -2 2 4 3 2 1 4   
     
    TShapes 39  
    Ve  
    1e-007  
    0 0 3  
    0 0  
     
    0101101  
    *  
    Ve  
    1e-007  
    0 0 0  
    0 0  
     
    0101101  
    *  
    Ed  
     1e-007 1 1 0  
    1  1 0 0 3  
    2  1 1 0 0 3  
    2  2 2 0 0 3  
    6  1 1 0  
    6  2 2 0  
    0  
     
    0101000  
    -39 0 +38 0 *  
    Ve  
    1e-007  
    0 2 3  
    0 0  
     
    0101101  
    *  
    Ed  
     1e-007 1 1 0  
    1  2 0 0 2  
    2  3 1 0 0 2  
    2  4 3 0 0 2  
    6  3 1 0  
    6  4 3 0  
    0  
     
    0101000  
    -36 0 +39 0 *  
    Ve  
    1e-007  
    0 2 0  
    0 0  
     
    0101101  
    *  
    Ed  
     1e-007 1 1 0  
    1  3 0 0 3  
    2  5 1 0 0 3  
    2  6 4 0 0 3  
    6  5 1 0  
    6  6 4 0  
    0  
     
    0101000  
    -36 0 +34 0 *  
    Ed  
     1e-007 1 1 0  
    1  4 0 0 2  
    2  7 1 0 0 2  
    2  8 5 0 0 2  
    6  7 1 0  
    6  8 5 0  
    0  
     
    0101000  
    -34 0 +38 0 *  
    Wi  
     
    0101000  
    -37 0 -35 0 +33 0 +32 0 *  
    Fa  
    0  1e-007 1 0  
    2  1  
    0101000  
    +31 0 *  
    Ve  
    1e-007  
    1 0 3  
    0 0  
     
    0101101  
    *  
    Ve  
    1e-007  
    1 0 0  
    0 0  
     
    0101101  
    *  
    Ed  
     1e-007 1 1 0  
    1  5 0 0 3  
    2  9 6 0 0 3  
    2  10 2 0 0 3  
    6  9 6 0  
    6  10 2 0  
    0  
     
    0101000  
    -29 0 +28 0 *  
    Ve  
    1e-007  
    1 2 3  
    0 0  
     
    0101101  
    *  
    Ed  
     1e-007 1 1 0  
    1  6 0 0 2  
    2  11 6 0 0 2  
    2  12 3 0 0 2  
    6  11 6 0  
    6  12 3 0  
    0  
     
    0101000  
    -26 0 +29 0 *  
    Ve  
    1e-007  
    1 2 0  
    0 0  
     
    0101101  
    *  
    Ed  
     1e-007 1 1 0  
    1  7 0 0 3  
    2  13 6 0 0 3  
    2  14 4 0 0 3  
    6  13 6 0  
    6  14 4 0  
    0  
     
    0101000  
    -26 0 +24 0 *  
    Ed  
     1e-007 1 1 0  
    1  8 0 0 2  
    2  15 6 0 0 2  
    2  16 5 0 0 2  
    6  15 6 0  
    6  16 5 0  
    0  
     
    0101000  
    -24 0 +28 0 *  
    Wi  
     
    0101000  
    -27 0 -25 0 +23 0 +22 0 *  
    Fa  
    0  1e-007 6 0  
    2  6  
    0101000  
    +21 0 *  
    Ed  
     1e-007 1 1 0  
    1  9 0 0 1  
    2  17 2 0 0 1  
    2  18 5 0 0 1  
    6  17 2 0  
    6  18 5 0  
    0  
     
    0101000  
    -28 0 +38 0 *  
    Ed  
     1e-007 1 1 0  
    1  10 0 0 1  
    2  19 2 0 0 1  
    2  20 3 0 0 1  
    6  19 2 0  
    6  20 3 0  
    0  
     
    0101000  
    -29 0 +39 0 *  
    Wi  
     
    0101000  
    -19 0 -27 0 +18 0 +37 0 *  
    Fa  
    0  1e-007 2 0  
    2  2  
    0101000  
    +17 0 *  
    Ed  
     1e-007 1 1 0  
    1  11 0 0 1  
    2  21 4 0 0 1  
    2  22 5 0 0 1  
    6  21 4 0  
    6  22 5 0  
    0  
     
    0101000  
    -24 0 +34 0 *  
    Ed  
     1e-007 1 1 0  
    1  12 0 0 1  
    2  23 4 0 0 1  
    2  24 3 0 0 1  
    6  23 4 0  
    6  24 3 0  
    0  
     
    0101000  
    -26 0 +36 0 *  
    Wi  
     
    0101000  
    -15 0 -23 0 +14 0 +33 0 *  
    Fa  
    0  1e-007 4 0  
    2  4  
    0101000  
    +13 0 *  
    Wi  
     
    0101000  
    -32 0 -15 0 +22 0 +19 0 *  
    Fa  
    0  1e-007 5 0  
    2  5  
    0101000  
    +11 0 *  
    Wi  
     
    0101000  
    -35 0 -14 0 +25 0 +18 0 *  
    Fa  
    0  1e-007 3 0  
    2  3  
    0101000  
    +9 0 *  
    Sh  
     
    0101100  
    -30 0 +20 0 -16 0 +12 0 -10 0  +8 0 *  
    So  
     
    0100000  
    +7 0 *  
    CS  
     
    0101000  
    +6 3 *  
    Ve  
    1e-007  
    1 0 0  
    0 0  
     
    0101101  
    *  
    Ve  
    1e-007  
    2 0 0  
    0 0  
     
    0101101  
    *  
    Ed  
     1e-007 1 1 0  
    1  13 0 0 1  
    5  1 0  
    0  
     
    0101000  
    +4 0 -3 0 *  
    Co  
     
    1100000  
    +5 0 +2 0 *  
     
    +1 0   
    0  
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Oct 30 2021 10:59:39 for Open CASCADE Technology by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
